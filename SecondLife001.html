<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<meta name="theme-color" content="#ff6600" />
<title>10分鐘打造你的AI生涯教練｜SecondLife Plus (Scheme B)</title>
<style>
  /* ---------- Base & Reset ---------- */
  *,*::before,*::after{box-sizing:border-box}
  [hidden]{display:none !important}
  html,body{height:100%}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans TC","PingFang TC",sans-serif;line-height:1.5;background:#f6f7fb;color:#1f2328;-webkit-font-smoothing:antialiased}
  img,svg{display:block;max-width:100%}
  button,input,textarea{font:inherit}
  :root{
    --brand:#ff6600;--brand-600:#e65a00;--ink:#1f2328;--muted:#5b616e;--ring:#e6e8ef;--card:#fff;--bg:#f6f7fb;
    --radius:14px;--shadow:0 6px 18px rgba(23,26,31,.06);
    --fs-12:clamp(12px, 0.75rem, 0.75rem);
    --fs-14:clamp(13px, 0.9vw + 10px, 14px);
    --fs-16:clamp(15px, 1.2vw + 10px, 16px);
    --fs-18:clamp(16px, 1.4vw + 10px, 18px);
    --fs-22:clamp(18px, 1.2rem + 0.8vw, 22px);
    --fs-28:clamp(22px, 1.2rem + 1.6vw, 28px);
    --zoom:1;
  }
  @media (prefers-color-scheme: dark){
    :root{--ink:#e7e9ee;--muted:#aeb4c0;--ring:#2c3340;--card:#0e1116;--bg:#0a0d12}
    body{background:var(--bg);color:var(--ink)}
  }

  header{position:sticky;top:0;z-index:10;backdrop-filter:saturate(160%) blur(8px);
    background:linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.65));
    border-bottom:1px solid var(--ring)}
  @media (prefers-color-scheme: dark){
    header{background:linear-gradient(180deg, rgba(14,17,22,.85), rgba(14,17,22,.55))}
  }
  .header-inner{max-width:min(1000px, 92vw);margin:0 auto;padding:18px 8px 10px}
  .title{font-weight:800;font-size:var(--fs-28);letter-spacing:.01em}
  .sub{color:var(--muted);font-size:var(--fs-14);margin-top:2px}

  .wrap{max-width:min(1000px, 92vw);margin:16px auto 40px;padding:0 4px}

  .card{background:var(--card);border:1px solid var(--ring);border-radius:var(--radius);box-shadow:var(--shadow)}
  .landing{padding:16px;display:grid;gap:12px}

  .muted{color:var(--muted);font-size:var(--fs-14)}
  .hint{color:var(--muted);font-size:var(--fs-12)}
  .qtitle{font-size:var(--fs-22);font-weight:800;margin:4px 0}

  .btn{appearance:none;border:1px solid transparent;background:var(--brand);color:#fff;border-radius:10px;padding:.8em 1.1em;font-weight:800;cursor:pointer;display:inline-flex;align-items:center;gap:.5em;box-shadow:0 1px 0 rgba(0,0,0,.05);transition:transform .06s ease, background .2s ease, box-shadow .2s ease}
  .btn:hover{background:var(--brand-600)}
  .btn:active{transform:translateY(1px)}
  .btn.secondary{background:#444e60}
  .btn.ghost{background:transparent;color:var(--ink);border-color:var(--ring)}
  .btn.block{width:100%;justify-content:center}

  .toolbar{display:flex;flex-wrap:wrap;gap:8px;justify-content:flex-end;margin-top:12px}

  .row{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
  .field{width:100%;padding:.8em .9em;border:1px solid var(--ring);border-radius:10px;font-size:var(--fs-16);background:var(--card);color:inherit}
  .field:focus{outline:2px solid transparent;box-shadow:0 0 0 3px rgba(255,102,0,.25)}

  .grid{display:grid;gap:10px}
  .cols-2{grid-template-columns:1fr}
  @media(min-width:640px){.cols-2{grid-template-columns:1fr 1fr}}
  @media(min-width:900px){.cols-3{grid-template-columns:repeat(3,1fr)}}

  /* ----- SCHEME B: higher-contrast chips for mobile ----- */
  .chip{display:flex;align-items:flex-start;gap:10px;padding:12px 14px;border:1px solid var(--ring);border-radius:999px;background:#f2f3f5;color:#1f2328;cursor:pointer;user-select:none;outline:none;font-weight:500}
  .chip b{font-variant-numeric:tabular-nums}
  .chip:hover{background:#e9eaee}
  .chip:active{background:#ffd6bf}
  .chip:focus-visible{box-shadow:0 0 0 3px rgba(255,102,0,.25)}

  .chip.sel{background:#ffe0cc;border-color:#ff6600;color:#1f2328;position:relative;overflow:hidden}
  .chip.sel::before{content:'';position:absolute;inset:0;border-radius:999px;background:rgba(255,102,0,.08);pointer-events:none}
  .chip.sel[data-order]::after{content:attr(data-order);position:absolute;inset:0;display:flex;align-items:center;justify-content:center;color:#a04300;font-weight:800;font-size:20px;line-height:1;pointer-events:none;width:32px;height:32px;margin:auto;border-radius:50%;background:#fff}

  @media (prefers-color-scheme: dark){
    .chip{background:#1c2430;color:#e7e9ee;border-color:#2c3340}
    .chip:hover{background:#212b39}
    .chip:active{background:#40332a}
    .chip.sel{background:#3a2a22;border-color:#ff8a4a;color:#fff}
    .chip.sel::before{background:rgba(255,138,74,.12)}
    .chip.sel[data-order]::after{background:#2b211b;color:#ffd6bf}
  }

  .progress{position:sticky;top:58px;height:10px;background:#e9ebf3;border-radius:999px;overflow:hidden;margin:0 0 14px}
  .bar{height:100%;background:var(--brand);width:0;transition:width .25s ease}

  textarea{width:100%;min-height:44vh;resize:vertical}

  .safe-bottom{padding-bottom:calc(env(safe-area-inset-bottom, 0) + 6px)}

  @media (max-width:360px){
    .btn{padding:.7em .9em}
    .chip{padding:10px 12px}
  }

  .btn.ghost.inline-link{padding:2px 6px;font-size:var(--fs-12);line-height:1.4;display:inline-flex;align-items:center;margin-left:4px;text-decoration:none}
  .btn.ghost.inline-link:hover{background:var(--brand);color:#fff;border-color:var(--brand)}

  .sel-strip{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:8px}
  .sel-pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px dashed var(--brand);background:#fff7f0;border-radius:999px;font-size:var(--fs-12)}
  .sel-pill b{font-variant-numeric:tabular-nums}
  .sel-pill button{all:unset;cursor:pointer;padding:2px 4px;border-radius:6px}
  .sel-pill button:focus-visible{outline:2px solid var(--brand)}
  .sel-pill button:hover{background:rgba(0,0,0,.06)}

  @keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }
  @keyframes popIn { 0% { transform: scale(.6); opacity: 0 } 60% { transform: scale(1.05); opacity: 1 } 100% { transform: scale(1) } }
  .chip.sel::before{animation: fadeIn .18s ease-out}
  .chip.sel::after{animation: popIn .22s ease-out}

  /* --- Zoom & font scaling (A±) --- */
  :root{
    --fs-12: calc(12px * var(--zoom));
    --fs-14: calc(14px * var(--zoom));
    --fs-16: calc(16px * var(--zoom));
    --fs-18: calc(18px * var(--zoom));
    --fs-22: calc(22px * var(--zoom));
    --fs-28: calc(28px * var(--zoom));
  }
  .toolbar-top{position:fixed;right:10px;top:10px;z-index:50;display:flex;gap:6px}
  .btn.icon{width:36px;height:36px;padding:0;display:inline-flex;align-items:center;justify-content:center}
  .btn.icon small{font-weight:700}
</style>
</head>

<body>

  <div class="toolbar-top" aria-label="字級調整">
    <button class="btn icon" id="zoomOut" title="縮小字級"><small>A−</small></button>
    <button class="btn icon" id="zoomIn" title="放大字級"><small>A＋</small></button>
  </div>

  <header>
    <div class="header-inner">
      <div class="title">10分鐘打造你的AI生涯教練</div>
      <div class="sub">逐題盤點 → 一鍵複製 → 直接貼到 ChatGPT 生成你的AI職涯教練</div>
    </div>
  </header>

  <main class="wrap">
    <!-- 只在首頁顯示的 Landing 區塊 -->
    <section class="card landing" id="landing" aria-label="起始畫面">
      <p class="muted">逐題填寫或直接載入範例，最後自動產生完整文字，一鍵複製到 ChatGPT。此頁只會出現在首頁，不會出現在後續題目。</p>
      <div class="grid">
        <button class="btn block" id="startBtn" aria-label="啟動引導">▶︎ 啟動我的AI職涯教練</button>
        <button class="btn secondary block" id="sampleBtn" aria-label="載入範例">✨ 載入範例，先體驗看看</button>
      </div>
      <p class="hint">提示：沒有相關資訊可勾選「無」。</p>
    </section>

    <div id="stage" class="safe-bottom" style="margin-top:14px"></div>
  </main>

<script>
document.addEventListener('DOMContentLoaded', function(){
try{
  const stage = document.getElementById('stage');
  const landing = document.getElementById('landing');

  // ---------- 狀態 ----------
  const S = { step:0, total:14,
    eduLevel:null,
    eduField:'', eduNone:false,
    skillPaper:'', skillNone:false,
    jobNow:'', jobNowNone:false,
    jobPrev:'', jobPrevNone:false,
    jobOther:'', jobOtherNone:false,
    manageYears:'', manageNone:false,
    licenses:'', licensesNone:false,
    flow1:'', flow1None:false,
    flow2:'', flow2None:false,
    flow3:'', flow3None:false,
    valuesSel:[], interestsSel:[], miSel:[]
  };

  // ---------- 選項 ----------
  const eduLevelOpts = [
    [1,'目前正在就讀高中職。'],[2,'高中職畢業。'],
    [3,'目前正在就讀大學。'],[4,'大學畢業。'],
    [5,'目前正在就讀碩士。'],[6,'碩士畢業。'],
    [7,'目前正在就讀博士。'],[8,'博士畢業。'],
    [9,'其他']
  ];
  const valuesOpts=[[1,'具有影響力：工作能讓我獲得影響力，取得良好的社會地位與聲望。'],[2,'理念要有共鳴：工作或公司文化能符合我的核心價值。'],[3,'樂於接受挑戰：工作有挑戰性，使我能從工作中持續獲得成就感。'],[4,'終身學習最幸福：工作能提供學習成長機會，有利未來的專業發展或升遷。'],[5,'公平最重要：工作的分派、管理、賞罰、薪酬分配都公平合理。'],[6,'穩定生產力：工作是在安全舒適的環境中進行，不擔心被任意調動職務或失業。'],[7,'重視薪水福利：工作提供的薪資福利，可讓我維持良好生活品質。'],[8,'目標流程清楚：工作有清楚的流程及規範可依循，可以具體地評估工作成果。'],[9,'工作符合興趣：工作內容符合我的興趣，讓我能樂在工作。'],[10,'熱愛多樣化任務：工作內容豐富多元，不會一成不變。'],[11,'自由不受限：工作時我能自行規劃工作方式，不受別人的阻礙或控制。'],[12,'創意獨特：工作能發揮自己的長才與優勢，創造獨特的價值。'],[13,'工作生活平衡：工作能讓我兼顧家庭和休閒生活。'],[14,'服務他人：工作讓我能幫助他人，為社會大眾服務。'],[15,'鼓勵起手式：主管能重視並肯定我，在工作中提供我指導、支持與鼓勵。'],[16,'歡樂工作氣氛：同事間能互助合作，有良好工作氛圍，讓人有歸屬感。']];
  const interestOpts = [[1,'R.實作型：喜歡具體、動手操作的任務，常展現解決實際問題的行為。偏好戶外、機械、工具或體力活動。'],[2,'I.研究型：喜歡思考、探究、驗證理論，展現邏輯推理與獨立解決問題。'],[3,'A.藝術型：重視自我表達與創造，偏好音樂、繪畫、設計、表演等高自由度活動。'],[4,'S.社會型：喜歡助人、協作與引導他人，偏好溝通、人際互動與服務工作。'],[5,'E.企業型：喜歡影響與說服他人，展現領導、組織與決策的行為。'],[6,'C.事務型：喜歡有結構與秩序的環境，擅長處理數據、文件、流程。']];
  const miOpts=[[1,'邏輯數學：擅長推理思考，喜歡提問尋找答案。'],[2,'語言文字：善於表達，喜歡閱讀、撰寫創作。'],[3,'自然觀察：喜歡觀察生態，對飼養動物、栽種植物有興趣。'],[4,'肢體動覺：擅長用身體表達與動手操作。'],[5,'空間藝術：用圖像思考，喜歡繪畫、設計與空間規劃。'],[6,'音樂旋律：易記旋律，能辨別音調，喜歡樂器。'],[7,'人際互動：擅長觀察情緒，喜歡團體活動與帶領。'],[8,'內省同理：擅長探索自己與同理他人，能安靜獨處。']];

  // ---------- 範例資料 ----------
  const sample = {
    eduLevel:8,
    eduField:
`大學是念心理系，主修工商心理學組。輔系是修讀企管系與新聞系。
碩士是念心理研究所，主修工商心理學。
博士是念心理研究所，主修工商心理學，輔修心理輔導。`,
    skillPaper:
`擅長科目有：人力資源管理、組織心理學、領導心理學、心理輔導、正向心理學、心理測驗、統計、SPSS。
碩士論文：目標設定對工作動機的影響。
博士論文：部屬對領導者的知覺與因應行為。`,
    jobNow:'人力銀行/職涯教育長/15年。',
    jobPrev:'資訊科技製造公司/員工發展室專案顧問/3年。',
    jobOther:'國立大學/心理系助理教授/5年。',
    manageYears:'15',
    licenses:'教育部助理教授證書、TA溝通交流分析。',
    flow1:'大學期間，參加返鄉服務隊陪伴偏鄉國小兒童探索工作世界。',
    flow2:'在人力銀行服務期間，負責培訓150位職涯引導師。',
    flow3:'在服役期間擔任巡迴教官，負責官兵的情緒管理及職涯規劃教育。',
    values:[14,1,2], interests:[4,5], mi:[8,7,2]
  };

  // ---------- 啟動 / 載入 ----------
  function hideLanding(){ landing.hidden = true; landing.setAttribute('aria-hidden','true'); }
  function showLanding(){ landing.hidden = false; landing.removeAttribute('aria-hidden'); }
  function start(){ S.step=1; hideLanding(); render(); }
  function loadSample(){
    Object.assign(S, {
      step:1,
      eduLevel:sample.eduLevel,
      eduField:sample.eduField, eduNone:false,
      skillPaper:sample.skillPaper, skillNone:false,
      jobNow:sample.jobNow, jobNowNone:false,
      jobPrev:sample.jobPrev, jobPrevNone:false,
      jobOther:sample.jobOther, jobOtherNone:false,
      manageYears:sample.manageYears, manageNone:false,
      licenses:sample.licenses, licensesNone:false,
      flow1:sample.flow1, flow1None:false,
      flow2:sample.flow2, flow2None:false,
      flow3:sample.flow3, flow3None:false,
      valuesSel:sample.values.slice(), interestsSel:sample.interests.slice(), miSel:sample.mi.slice()
    });
    hideLanding(); render();
  }
  document.getElementById('startBtn').addEventListener('click', start);
  document.getElementById('sampleBtn').addEventListener('click', loadSample);

  // ---------- Zoom controls (A±) ----------
  (function(){
    const root = document.documentElement;
    const saved = localStorage.getItem('zoom') || '1';
    root.style.setProperty('--zoom', saved);
    function setZoom(z){
      z = Math.max(0.85, Math.min(1.4, Math.round(z*100)/100));
      root.style.setProperty('--zoom', z);
      localStorage.setItem('zoom', z);
    }
    document.getElementById('zoomIn').addEventListener('click', ()=> setZoom(parseFloat(getComputedStyle(root).getPropertyValue('--zoom')) + 0.1));
    document.getElementById('zoomOut').addEventListener('click', ()=> setZoom(parseFloat(getComputedStyle(root).getPropertyValue('--zoom')) - 0.1));
  })();

  // ---------- Open ChatGPT App (prefer app) ----------
  function openChatGPTApp(){
    const webUrl='https://chatgpt.com/';
    const universalUrl='https://chat.openai.com/';
    const schemeUrl='chatgpt://';
    const isIOS=/iphone|ipad|ipod/i.test(navigator.userAgent);
    const isAndroid=/android/i.test(navigator.userAgent);
    let fallbackTimer;
    const fallback=()=>{ window.open(universalUrl,'_blank','noopener') || window.open(webUrl,'_blank','noopener'); };
    const onVis=()=>{ if(document.hidden){ clearTimeout(fallbackTimer); document.removeEventListener('visibilitychange', onVis);} };
    document.addEventListener('visibilitychange', onVis);
    try{
      if(isIOS){
        const iframe=document.createElement('iframe'); iframe.style.display='none'; iframe.src=schemeUrl; document.body.appendChild(iframe);
        fallbackTimer=setTimeout(fallback,700); setTimeout(()=>iframe.remove(),1500);
      }else if(isAndroid){
        location.href=schemeUrl; fallbackTimer=setTimeout(fallback,700);
      }else{
        fallback();
      }
    }catch(e){ fallback(); }
  }

  // ---------- UI helpers ----------
  function progress(){
    const pct=Math.round(Math.min(S.step,S.total)/S.total*100);
    return '<div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="'+pct+'"><div class="bar" style="width:'+pct+'%"></div></div>';
  }
  function nav(){
    return '<div class="toolbar" role="toolbar" aria-label="導覽按鈕">'
      +(S.step>1&&S.step<=S.total?'<button class="btn ghost" id="prev" aria-label="上一題">← 上一題</button>':'')
      +(S.step<S.total?'<button class="btn" id="next" aria-label="下一題">下一題 →</button>':'<button class="btn" id="gen" aria-label="產生彙整">生成召喚ChatGPT的Prompt →</button>')
      +'</div>';
  }
  function chips(opts, selected, multi){
    let html='<div class="grid cols-2">';
    for(const [id, text] of opts){
      const isSel = multi ? selected.includes(id) : selected===id;
      const order = multi && isSel ? (selected.indexOf(id)+1) : '';
      const state = isSel? ' sel' : '';
      html +=  (multi && isSel ? ('<button type="button" class="chip'+state+'" data-id="'+id+'" data-order="'+order+'"><b>(' + id + ')</b><span>'+text+'</span></button>') : ('<button type="button" class="chip'+state+'" data-id="'+id+'"><b>(' + id + ')</b><span>'+text+'</span></button>'));
    }
    html+='</div>'; return html;
  }
  function bindChips(set){
    stage.querySelectorAll('.chip').forEach(el=>{
      el.addEventListener('click',()=>{ const id=+el.getAttribute('data-id'); set(id); render(); });
      el.addEventListener('keydown',(e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); el.click(); }});
    });
  }
  function toggleSingle(setter){ return (id)=>setter(id); }
  function toggleMulti(arr,id,cap){
    const i=arr.indexOf(id);
    if(i>=0){arr.splice(i,1);return;}
    if(arr.length<cap){arr.push(id);} }

  function selView(opts, selected){
    if(!selected || !selected.length) return '<div class="hint">尚未選擇。</div>';
    let html='<div class="sel-strip" id="selStrip">';
    for(const id of selected){
      const o = opts.find(o=>o[0]===id); if(!o) continue;
      html += '<span class="sel-pill"><b>(' + id + ')</b><span>'+o[1].replace(/<[^>]+>/g,'')+'</span><button class="sel-remove" aria-label="移除" data-id="'+id+'">×</button></span>';
    }
    html+='</div>'; return html;
  }
  function bindSelRemove(arr){
    (stage.querySelectorAll('.sel-remove')||[]).forEach(btn=>{
      btn.addEventListener('click',()=>{ const id=+btn.getAttribute('data-id'); const i=arr.indexOf(id); if(i>=0){arr.splice(i,1);} render(); });
    });
  }

  function qWrap(title, hint, inner){
    stage.innerHTML = progress()+`<section class="card" style="padding:16px" aria-live="polite"><div class="qtitle">${title}</div>${hint?`<div class="hint">${hint}</div>`:''}<div class="grid" style="margin-top:10px">${inner}</div>${nav()}</section>`;
    const p=stage.querySelector('#prev'); if(p) p.onclick=()=>{S.step--; render();};
    const n=stage.querySelector('#next'); if(n) n.onclick=()=>{S.step++; render();};
    const g=stage.querySelector('#gen'); if(g) g.onclick=()=>{S.step=15; render();};
    const firstFocusable = stage.querySelector('input, textarea, .chip, .btn');
    if(firstFocusable) firstFocusable.focus({preventScroll:true});
  }

  // ---------- 題目呈現 ----------
  function render(){
    // 確保首頁不會出現在後續題目頁
    landing.hidden = (S.step >= 1);

    switch(S.step){
      case 0:
        showLanding();
        break;
      case 1:
        qWrap('1. 我的最高學歷？','請從以下選項選出一個。例如：選擇(8) 表示博士畢業。',
          chips(eduLevelOpts,S.eduLevel,false));
        bindChips(toggleSingle((id)=>S.eduLevel=id));
        break;
      case 2:
        qWrap('2. 我就讀的專業領域？',
        '請參考下方輸入框中的「範例」，依相同格式填寫；若無可勾選「無」。',
        `<div class="row">
           <textarea class="field" id="eduField" ${S.eduNone?'disabled':''} aria-label="就讀專業領域" placeholder="
大學是念心理系，主修工商心理學組。輔系是修讀企管系與新聞系。
碩士是念心理研究所，主修工商心理學。
博士是念心理研究所，主修工商心理學，輔修心理輔導。">${escape(S.eduField||'')}</textarea>
           <label class="hint"><input type="checkbox" id="eduNone" ${S.eduNone?'checked':''}> 無</label>
         </div>`);
        stage.querySelector('#eduField').oninput=e=>S.eduField=e.target.value;
        stage.querySelector('#eduNone').onchange=e=>{S.eduNone=e.target.checked; render();};
        break;
      case 3:
        qWrap('3. 我擅長的科目、做過的專題、論文或參與過的競賽：',
        '請參考下方輸入框中的「範例」，依相同格式填寫；若無可勾選「無」。',
        `<div class="row">
           <textarea class="field" id="skillPaper" ${S.skillNone?'disabled':''} aria-label="擅長科目/論文/競賽" placeholder="
擅長科目有：人力資源管理、組織心理學、領導心理學、心理輔導、正向心理學、心理測驗、統計、SPSS。
碩士論文：目標設定對工作動機的影響。
博士論文：部屬對領導者的知覺與因應行為。">${escape(S.skillPaper||'')}</textarea>
           <label class="hint"><input type="checkbox" id="skillNone" ${S.skillNone?'checked':''}> 無</label>
         </div>`);
        stage.querySelector('#skillPaper').oninput=e=>S.skillPaper=e.target.value;
        stage.querySelector('#skillNone').onchange=e=>{S.skillNone=e.target.checked; render();};
        break;
      case 4:
        qWrap('4. 我最近或目前從事的工作是？（含兼職、實習與志工…）',
        '請輸入：產業/職務/累積年資。例如：人力銀行/職涯教育長/15年。',
        `<div class="row">
           <input class="field" id="jobNow" placeholder="人力銀行/職涯教育長/15年。" ${S.jobNowNone?'disabled':''} value="${escape(S.jobNow)}" aria-label="目前工作">
           <label class="hint"><input type="checkbox" id="jobNowNone" ${S.jobNowNone?'checked':''}> 無</label>
         </div>`);
        stage.querySelector('#jobNow').oninput=e=>S.jobNow=e.target.value;
        stage.querySelector('#jobNowNone').onchange=e=>{S.jobNowNone=e.target.checked; render();};
        break;
      case 5:
        qWrap('5. 我更早之前從事的工作是？（含兼職、實習與志工…）',
        '請輸入：產業/職務/累積年資。例如：資訊科技製造公司/員工發展室專案顧問/3年。',
        `<div class="row">
           <input class="field" id="jobPrev" placeholder="資訊科技製造公司/員工發展室專案顧問/3年。" ${S.jobPrevNone?'disabled':''} value="${escape(S.jobPrev)}" aria-label="過去工作">
           <label class="hint"><input type="checkbox" id="jobPrevNone" ${S.jobPrevNone?'checked':''}> 無</label>
         </div>`);
        stage.querySelector('#jobPrev').oninput=e=>S.jobPrev=e.target.value;
        stage.querySelector('#jobPrevNone').onchange=e=>{S.jobPrevNone=e.target.checked; render();};
        break;
      case 6:
        qWrap('6. 除了上述二個工作，我還從事過那個比較有成就感的工作是？（含兼職、實習與志工…）',
        '請輸入：產業/職務/累積年資。例如：國立大學/心理系助理教授/5年。',
        `<div class="row">
           <input class="field" id="jobOther" placeholder="國立大學/心理系助理教授/5年。" ${S.jobOtherNone?'disabled':''} value="${escape(S.jobOther)}" aria-label="其他成就工作">
           <label class="hint"><input type="checkbox" id="jobOtherNone" ${S.jobOtherNone?'checked':''}> 無</label>
         </div>`);
        stage.querySelector('#jobOther').oninput=e=>S.jobOther=e.target.value;
        stage.querySelector('#jobOtherNone').onchange=e=>{S.jobOtherNone=e.target.checked; render();};
        break;
      case 7:
        qWrap('7. 我的管理經驗？',
        '例如：5年。請直接輸入幾年；若不適用可勾選「無」。',
        `<div class="row">
           <input class="field" id="manageYears" inputmode="numeric" placeholder="例如：5" ${S.manageNone?'disabled':''} value="${escape(S.manageYears)}" aria-label="管理年資（年）">
           <label class="hint"><input type="checkbox" id="manageNone" ${S.manageNone?'checked':''}> 無</label>
         </div>`);
        stage.querySelector('#manageYears').oninput=e=>S.manageYears=e.target.value;
        stage.querySelector('#manageNone').onchange=e=>{S.manageNone=e.target.checked; render();};
        break;
      case 8:
        qWrap('8. 我擁有的證照？',
        '多張證照請用逗號（,）分開；例如：教育部助理教授證書、TA溝通交流分析。若無可勾選「無」。',
        `<div class="row">
           <input class="field" id="licenses" placeholder="乙級就業服務士,PMP證照。" ${S.licensesNone?'disabled':''} value="${escape(S.licenses)}" aria-label="證照清單">
           <label class="hint"><input type="checkbox" id="licensesNone" ${S.licensesNone?'checked':''}> 無</label>
         </div>`);
        stage.querySelector('#licenses').oninput=e=>S.licenses=e.target.value;
        stage.querySelector('#licensesNone').onchange=e=>{S.licensesNone=e.target.checked; render();};
        break;
      case 9:
        qWrap('9. 我最有心流時光的一次生命事件是？',
        '每個心流事件包含：Time（時間/背景）、Flow（內容重點）。例如：大學期間，參加返鄉服務隊陪伴偏鄉國小兒童探索工作世界。',
        `<textarea class="field" id="flow1" placeholder="請用 1~2 句寫下 Time 與 Flow 的重點。" ${S.flow1None?'disabled':''} aria-label="心流事件一">${escape(S.flow1)}</textarea>
         <label class="hint"><input type="checkbox" id="flow1None" ${S.flow1None?'checked':''}> 無</label>`);
        stage.querySelector('#flow1').oninput=e=>S.flow1=e.target.value;
        stage.querySelector('#flow1None').onchange=e=>{S.flow1None=e.target.checked; render();};
        break;
      case 10:
        qWrap('10. 我另一個比較有心流時光感覺的生命經歷是？',
        '例如：在人力銀行服務期間，負責培訓150位職涯引導師。',
        `<textarea class="field" id="flow2" ${S.flow2None?'disabled':''} aria-label="心流事件二" placeholder="請輸入你的第二個心流事件">${escape(S.flow2)}</textarea>
         <label class="hint"><input type="checkbox" id="flow2None" ${S.flow2None?'checked':''}> 無</label>`);
        stage.querySelector('#flow2').oninput=e=>S.flow2=e.target.value;
        stage.querySelector('#flow2None').onchange=e=>{S.flow2None=e.target.checked; render();};
        break;
      case 11:
        qWrap('11. 我另一個比較有心流時光感覺的生命經歷是？',
        '例如：在服役期間擔任巡迴教官，負責官兵的情緒管理及職涯規劃教育。',
        `<textarea class="field" id="flow3" ${S.flow3None?'disabled':''} aria-label="心流事件三" placeholder="請輸入你的第三個心流事件">${escape(S.flow3)}</textarea>
         <label class="hint"><input type="checkbox" id="flow3None" ${S.flow3None?'checked':''}> 無</label>`);
        stage.querySelector('#flow3').oninput=e=>S.flow3=e.target.value;
        stage.querySelector('#flow3None').onchange=e=>{S.flow3None=e.target.checked; render();};
        break;
      case 12:
        qWrap('12. 我比較在乎的三個職業價值觀是？',
        '請點選三個在乎的職業價值觀。<a href="https://guide.104.com.tw/value/" target="_blank" rel="noopener">（若不清楚，可先做「職業價值觀測驗」）</a>',
        selView(valuesOpts,S.valuesSel)+
        chips(valuesOpts,S.valuesSel,true)+`<div class="hint">已選 ${S.valuesSel.length} / 3</div>`);
        bindChips(id=>{toggleMulti(S.valuesSel,id,3)});
        bindSelRemove(S.valuesSel);
        break;
      case 13:
        qWrap('13. 我比較來勁的二個生涯興趣？',
        '請點選二個來勁的生涯興趣。<a href="https://guide.104.com.tw/interest/" target="_blank" rel="noopener">（若不清楚，可先做「生涯興趣測驗」）</a>',
        selView(interestOpts,S.interestsSel)+
        chips(interestOpts,S.interestsSel,true)+`<div class="hint">已選 ${S.interestsSel.length} / 2</div>`);
        bindChips(id=>{toggleMulti(S.interestsSel,id,2)});
        bindSelRemove(S.interestsSel);
        break;
      case 14:
        qWrap('14. 我比較擅長的三個多元智能？','請點選三個比較擅長的多元智能。',
          selView(miOpts,S.miSel)+
          chips(miOpts,S.miSel,true)+`<div class="hint">已選 ${S.miSel.length} / 3</div>`);
        bindChips(id=>{toggleMulti(S.miSel,id,3)});
        bindSelRemove(S.miSel);
        break;
      case 15:
        const text = compiledText();
        stage.innerHTML = progress()+`<section class="card" style="padding:16px">
          <div class="qtitle">彙整完成</div>
          <div class="hint">下方文字已包含 14 項彙整與 ABCDEF 七題請求。點「一鍵複製」即可貼上使用。</div>
          <textarea id="out" aria-label="彙整文字" class="field">${escape(text)}</textarea>
          <div class="toolbar">
            <button class="btn" id="copy">Step.1 一鍵複製貼到ChatGPT的 Prompt</button>
            <button class="btn secondary" id="openChatGPT">Step.2 開啟 ChatGPT App / 網頁</button>
            <button class="btn ghost" id="restart">重新開始</button>
          </div>
        </section>`;
        document.getElementById('copy').onclick=async()=>{
          const txt = document.getElementById('out').value;
          try{
            if (navigator.clipboard && window.isSecureContext) {
              await navigator.clipboard.writeText(txt);
              toast('已複製到剪貼簿！');
            }else{
              fallbackCopy(txt);
            }
          }catch(_){ fallbackCopy(txt); }
        };
        document.getElementById('restart').onclick=()=>{ reset(); };
        document.getElementById('openChatGPT').onclick=openChatGPTApp;
        break;
    }
  }

  function toast(msg){
    const n=document.createElement('div');
    n.textContent=msg;
    Object.assign(n.style,{position:'fixed',left:'50%',bottom:'calc(env(safe-area-inset-bottom,0) + 24px)',transform:'translateX(-50%)',background:'var(--ink)',color:'#fff',padding:'10px 14px',borderRadius:'999px',boxShadow:'var(--shadow)',zIndex:1000});
    document.body.appendChild(n);
    setTimeout(()=>{n.style.opacity='0';n.style.transition='opacity .3s';},1200);
    setTimeout(()=>n.remove(),1550);
  }

  function fallbackCopy(txt){
    const ta=document.createElement('textarea');
    ta.value=txt; ta.setAttribute('readonly','');
    ta.style.position='fixed'; ta.style.top='-9999px'; ta.style.opacity='0';
    document.body.appendChild(ta);
    ta.focus(); ta.select(); ta.setSelectionRange(0, ta.value.length);
    let ok=false; try{ ok=document.execCommand('copy'); }catch(_){ ok=false }
    ta.remove();
    if(ok){ toast('已複製到剪貼簿！'); } else { alert('複製被瀏覽器阻擋，請按 Ctrl/Cmd + C'); }
  }

  function escape(s){ return String(s??'').replace(/[&<>]/g,ch=>({'&':'&amp;','<':'&lt;','>':'&gt;'}[ch])); }
  function findById(arr,id){ const f=arr.find(a=>a[0]===id); return f?f[1]:''; }

  function reset(){ Object.assign(S, { step:0,
    eduLevel:null, eduField:'', eduNone:false,
    skillPaper:'', skillNone:false,
    jobNow:'', jobNowNone:false,
    jobPrev:'', jobPrevNone:false,
    jobOther:'', jobOtherNone:false,
    manageYears:'', manageNone:false,
    licenses:'', licensesNone:false,
    flow1:'', flow1None:false,
    flow2:'', flow2None:false,
    flow3:'', flow3None:false,
    valuesSel:[], interestsSel:[], miSel:[]
  }); showLanding(); stage.innerHTML=''; }

  // ---------- 彙整文字（含 ABCDEF 七題） ----------
  function compiledText(){
    const L1 = `1.我的最高學歷是：${(S.eduLevel?`(${S.eduLevel})`:'')}${findById(eduLevelOpts,S.eduLevel)}`;
    const L2 = `2.我就讀的專業領域有：${S.eduNone?'無。':(S.eduField||'')}`;
    const L3 = `3.我擅長的科目、做過的專題、論文或參與過的競賽：\n${S.skillNone?'無。':(S.skillPaper||'')}`;
    const L4 = `4.我最近或目前從事的工作是：${S.jobNowNone?'無。':(S.jobNow||'')}`;
    const L5 = `5.我更早之前從事的工作是：${S.jobPrevNone?'無。':(S.jobPrev||'')}`;
    const L6 = `6.除了上述二個工作，我還從事過那個比較有成就感的工作是：${S.jobOtherNone?'無。':(S.jobOther||'')}`;
    const L7 = `7.我的管理經驗：${S.manageNone?'無。':(S.manageYears?S.manageYears+'年。':'（未填）')}`;
    const L8 = `8.我擁有的證照：${S.licensesNone?'無。':(S.licenses||'（未填）')}`;
    const L9 = `9.我最有心流時光的一次生命經歷是：${S.flow1None?'無。':(S.flow1||'（未填）')}`;
    const L10 = `10.我另一個比較有心流時光感覺的生命經歷是：${S.flow2None?'無。':(S.flow2||'（未填）')}`;
    const L11 = `11.我另一個比較有心流時光感覺的生命經歷是：${S.flow3None?'無。':(S.flow3||'（未填）')}`;
    const L12 = '12.我比較在乎的三個職業價值觀是：\n' + (S.valuesSel.length? S.valuesSel.map(id=>`(${id}) ${findById(valuesOpts,id)}`).join('\n') : '未選擇');
    const L13 = '13.我比較來勁的二個生涯興趣是：\n' + (S.interestsSel.length? S.interestsSel.map(id=>`(${id}) ${findById(interestOpts,id)}`).join('\n') : '未選擇');
    const L14 = '14.我比較擅長的多元智能是：\n' + (S.miSel.length? S.miSel.map(id=>`(${id}) ${findById(miOpts,id)}`).join('\n') : '未選擇');

    const tail = [
'',
'請根據上述彙整的各項生涯發展與探索資訊，回答我以下的問題。回答的內容，請用條列方式呈現，方便我的閱讀。',
'A. 我有哪五個比較明確的熱情特質？每個熱情特質的標題，請用四個字表示。後面加上一句話，讓我可以清楚地知悉這個熱情特質。接著列出每個熱情特質，與我提供那些資料有關。請詳細列舉出資料中的具體內容加以說明。並針對每個熱情特質提供200個字的「摘要說明」。',
'B. 我有哪五個比較明確的專業才能？每個專業才能的標題，請用四個字表示。後面加上一句話，讓我可以清楚地知悉這個專業才能。接著列出每個專業才能，與我提供那些資料有關。請詳細列舉出資料中的具體內容加以說明。並針對每個專業才能提供200個字的「摘要說明」。',
'C. 推薦我適合從事的六個職業。每個推薦的職業，請用100個字介紹這個職業。並請說明這個職業目前發展的現況及未來發展的趨勢。最後請提供150個字說明為何推薦我從事這個職業。',
'D. 推薦我適合加入的六個產業，每個推薦的產業，請用100個字介紹這個產業。並請說明這個產業目前發展的現況及未來發展的趨勢。最後請提供150個字說明為何推薦我加入這個產業。',
'E. 推薦我適合從事的二個新興職業。每個推薦的新興職業，請用100個字介紹這個新興職業。並請說明這個新興職業目前發展的現況及未來發展的趨勢。最後請提供150個字說明為何推薦我從事這個新興職業。',
'F. 推薦我適合加入的二個新興產業，每個推薦的新興產業，請用100個字介紹這個新興產業。並請說明這個新興產業目前發展的現況及未來發展的趨勢。最後請提供150個字說明為何推薦我加入這個新興產業。',
'G. 根據你對問題ABCDEF的解析，推薦我最適合發展的三個職涯領域。每個推薦的職涯領域，請問200個字具體說明推薦的原因。並且說明這個職涯領域的發展現況與未來趨勢。',
    ].join('\n');

    return [L1,L2,L3,L4,L5,L6,L7,L8,L9,L10,L11,L12,L13,L14,'',tail].join('\n');
  }

  // 初始渲染
  render();

}catch(e){
  console.error(e);
}});
</script>
</body>
</html>
