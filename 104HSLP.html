<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>ã€é«˜ä¸­è·ã€‘ç”Ÿæ¶¯èˆˆè¶£ï¼¸å¿ƒæµæ™‚å…‰ â†’ å­¸ç¿’æ­·ç¨‹æª”æ¡ˆ</title>
<meta name="description" content="è¼¸å…¥ç”Ÿæ¶¯èˆˆè¶£æ¸¬é©—çµæœï¼†å¿ƒæµæ™‚å…‰äº‹ä»¶ï¼Œå°±å¯ä»¥ç”Ÿæˆè²¼åˆ°AIç”¢ç”Ÿå­¸ç¿’æ­·ç¨‹æª”æ¡ˆåˆç¨¿çš„Promptã€‚" />
<style>
  *,*::before,*::after{box-sizing:border-box}
  [hidden]{display:none !important}
  html,body{height:100%}
  :root{
    --brand:#ff6600;--brand-600:#e65a00;--ink:#1f2328;--muted:#5b616e;--ring:#e6e8ef;--card:#fff;
    --radius:14px;--shadow:0 6px 18px rgba(23,26,31,.06);
    --font-scale:1;
  }
  body{
    margin:0;color:var(--ink);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans TC","PingFang TC",sans-serif;
    line-height:1.65;background:#f6f7fb;
    font-size:calc(18px * var(--font-scale));
    -webkit-font-smoothing:antialiased;
  }
  @media(min-width:900px){ body{font-size:calc(17px * var(--font-scale));} }
  header{position:sticky;top:0;z-index:10;backdrop-filter:saturate(160%) blur(8px);
    background:linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.7));border-bottom:1px solid var(--ring)}
  .header-inner{max-width:min(980px,92vw);margin:0 auto;padding:12px 8px}
  .head-row{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .title{font-weight:800;font-size:clamp(20px, 1.1rem + 2vw, 30px)}
  .sub{color:var(--muted);font-size:clamp(.95rem, .9rem + .4vw, 1.05rem)}
  .fs-ctrl{display:flex;gap:8px;align-items:center}
  .btn{appearance:none;border:1px solid transparent;background:var(--brand);color:#fff;border-radius:10px;padding:.9em 1.1em;font-weight:800;cursor:pointer;display:inline-flex;align-items:center;gap:.5em;transition:transform .06s ease, background .2s ease;font-size:1em}
  .btn:hover{background:var(--brand-600)} .btn:active{transform:translateY(1px)}
  .btn.secondary{background:#444e60}
  .btn.ghost{background:transparent;color:inherit;border:1px solid var(--ring)}
  .btn.block{width:100%;justify-content:center}
  .btn.sm{padding:.45em .7em;border-radius:8px}
  .wrap{max-width:min(980px,92vw);margin:16px auto 40px;padding:0 4px}
  .card{background:var(--card);border:1px solid var(--ring);border-radius:var(--radius);box-shadow:var(--shadow)}
  .landing{padding:16px;display:grid;gap:12px}
  .qtitle{font-size:clamp(1.15rem, 1.05rem + 1vw, 1.6rem);font-weight:800;margin:4px 0}
  .muted{color:var(--muted);font-size:1rem}
  .hint{color:var(--muted);font-size:.95rem}
  .toolbar{display:flex;flex-wrap:wrap;gap:8px;justify-content:flex-end;margin-top:12px}
  .progress{position:sticky;top:64px;height:12px;background:#e9ebf3;border-radius:999px;overflow:hidden;margin:0 0 14px}
  .bar{height:100%;background:var(--brand);width:0;transition:width .25s ease}
  .grid{display:grid;gap:10px}
  .cols-2{grid-template-columns:1fr}
  @media(min-width:640px){.cols-2{grid-template-columns:1fr 1fr}}
  .row{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
  .field{width:100%;padding:1em 1.1em;border:1px solid var(--ring);border-radius:10px;font-size:1em;background:var(--card)}
  .field:focus{outline:2px solid transparent;box-shadow:0 0 0 3px rgba(255,102,0,.25)}
  textarea{min-height:28vh;resize:vertical}
  .chip{display:flex;align-items:flex-start;gap:12px;padding:14px 16px;border:1px solid var(--ring);border-radius:999px;background:#fafbff;cursor:pointer;user-select:none;font-size:1em}
  .chip b{font-variant-numeric:tabular-nums}
  .chip.sel{position:relative;background:#fff;border-color:#ffd0ae}
  .chip.sel::before{content:'';position:absolute;inset:0;border-radius:999px;background:rgba(255,102,0,.12);pointer-events:none}
  .chip.sel::after{content:attr(data-order);position:absolute;inset:0;margin:auto;display:flex;align-items:center;justify-content:center;width:38px;height:38px;border-radius:50%;background:#fff;color:#a04300;font-weight:800;font-size:1.1em;pointer-events:none}
  .sel-strip{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:8px}
  .sel-pill{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border:1px dashed var(--brand);background:#fff7f0;border-radius:999px;font-size:.95rem}
  .sel-pill button{all:unset;cursor:pointer;padding:2px 4px;border-radius:6px}
  .safe-bottom{padding-bottom:calc(env(safe-area-inset-bottom,0) + 8px)}

  .apps{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:8px}
  .appbtn{display:flex;align-items:center;justify-content:center;gap:10px;padding:.9em 1.1em;border:1px solid var(--ring);border-radius:12px;background:#fff;cursor:pointer;font-weight:800;box-shadow:var(--shadow)}
  .appbtn:hover{background:#fff7f0;border-color:#ffd0ae}
  .appbtn svg{width:22px;height:22px;display:block}
  .stepcap{font-weight:800;margin-top:8px;margin-bottom:4px}


  .center{text-align:center}
  .bigcopy{display:flex;justify-content:center;margin:8px 0 14px}
  .btn.xl{font-size:1.05em;padding:1.05em 1.4em;border-radius:12px}
  .appgrid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin:10px 0 6px}
  .appcard{background:#fff;border:1px solid var(--ring);border-radius:16px;padding:16px;display:flex;flex-direction:column;align-items:center;gap:10px;cursor:pointer;box-shadow:var(--shadow)}
  .appcard:hover{background:#fff7f0;border-color:#ffd0ae}
  .appicon{width:40px;height:40px;border-radius:12px;display:grid;place-items:center;border:1px solid #eee}
  .appname{font-weight:800}
  .restartwrap{display:flex;justify-content:center;margin-top:10px}

</style>
</head>
<body>
<header>
  <div class="header-inner">
    <div class="head-row">
      <div>
        <div class="title">ã€é«˜ä¸­è·ã€‘ç”Ÿæ¶¯èˆˆè¶£ï¼¸å¿ƒæµæ™‚å…‰ â†’ å­¸ç¿’æ­·ç¨‹æª”æ¡ˆ</div>
        <div class="sub">å½™æ•´ã€Œç”Ÿæ¶¯èˆˆè¶£ï¼¸å¿ƒæµæ™‚å…‰ã€æ¢ç´¢æˆæœï¼Œå°±å¯ä»¥ç”Ÿæˆè²¼åˆ°AIç”¢ç”Ÿå­¸ç¿’æ­·ç¨‹æª”æ¡ˆåˆç¨¿çš„Prompt</div>
      </div>
      <div class="fs-ctrl" aria-label="å­—ç´šèª¿æ•´">
        <button class="btn ghost sm" id="fsDown" title="ç¸®å°å­—ç´š">Aâˆ’</button>
        <button class="btn ghost sm" id="fsUp" title="æ”¾å¤§å­—ç´š">Aï¼‹</button>
      </div>
    </div>
  </div>
</header>

<main class="wrap">
  <section class="card landing" id="landing">
    <p class="muted">ä½¿ç”¨èªªæ˜ï¼šè«‹é»é¸ã€Œå•Ÿå‹•æˆ‘çš„AIè·æ¶¯æ•™ç·´ã€ï¼Œæ ¹æ“šå¼•å°å®ŒæˆPromptï¼›æˆ–æ˜¯é»é¸ã€Œè¼‰å…¥ç¯„ä¾‹ï¼Œå…ˆç©çœ‹çœ‹ã€ï¼Œå¿«é€Ÿé«”é©—ä¸€ä¸‹ä½¿ç”¨ç¨‹åºã€‚</p>
    <div class="grid">
      <button class="btn block" id="startBtn">â–¶ï¸ å•Ÿå‹•æˆ‘çš„AIè·æ¶¯æ•™ç·´</button>
      <button class="btn secondary block" id="sampleBtn">âœ¨ è¼‰å…¥ç¯„ä¾‹ï¼Œå…ˆç©çœ‹çœ‹</button>
    </div>
  </section>
  <div id="stage" class="safe-bottom" style="margin-top:14px"></div>
</main>

<script>
(function initApp(){
  const stage = document.getElementById('stage');
  const landing = document.getElementById('landing');
  if(!stage || !landing){ document.addEventListener('DOMContentLoaded', initApp); return; }

  /* --------- å­—ç´šæ§åˆ¶ï¼ˆAÂ±ï¼‰ --------- */
  const key='fsScaleV2';
  let scale = parseFloat(localStorage.getItem(key)) || 1; // 0.9 ~ 1.4
  function clamp(n,min,max){ return Math.max(min, Math.min(max,n)); }
  function applyScale(){ document.documentElement.style.setProperty('--font-scale', scale); }
  applyScale();
  document.getElementById('fsUp')?.addEventListener('click', ()=>{ scale = clamp(scale+0.1, 0.9, 1.4); localStorage.setItem(key,scale); applyScale(); });
  document.getElementById('fsDown')?.addEventListener('click', ()=>{ scale = clamp(scale-0.1, 0.9, 1.4); localStorage.setItem(key,scale); applyScale(); });

  /* --------- State --------- */
  const S = {
    step:0,total:13, // â† æ–°å¢å¿ƒæµèªªæ˜é ï¼Œç¸½æ­¥é©Ÿ+1
    g1: null, // current grade group
    g2_dept: '', g2_isHS: false,
    club: '', club_none:false,
    riasec: [], // pick 2
    mi: [], // pick 3
    flow1: '', flow1_none:false,
    flow2: '', flow2_none:false,
    flow3: '', flow3_none:false,
    flow4: '', flow4_none:false,
    flow5: '', flow5_none:false,
  };

  /* --------- Options --------- */
  const gradeOpts = [
    [1,'æ™®é€šå‹é«˜ä¸­ä¸€å¹´ç´š'],
    [2,'æ™®é€šå‹é«˜ä¸­äºŒå¹´ç´šï½ä¸‰å¹´ç´šï¼šäººæ–‡æ³•æ”¿é¡'],
    [3,'æ™®é€šå‹é«˜ä¸­äºŒå¹´ç´šï½ä¸‰å¹´ç´šï¼šè²¡ç¶“å•†ç®¡é¡'],
    [4,'æ™®é€šå‹é«˜ä¸­äºŒå¹´ç´šï½ä¸‰å¹´ç´šï¼šç§‘æŠ€å·¥ç¨‹é¡'],
    [5,'æ™®é€šå‹é«˜ä¸­äºŒå¹´ç´šï½ä¸‰å¹´ç´šï¼šç”Ÿé†«è¡›è­·é¡'],
    [6,'æŠ€è·å‹é«˜ä¸­'],
    [7,'å…¶ä»–ï¼ˆè«‹åœ¨ä¸‹ä¸€é¡Œè£œå……èªªæ˜ï¼‰']
  ];

  const riasecOpts = [
[1,'R.å¯¦ä½œå‹ï¼šå–œæ­¡å…·é«”ã€å‹•æ‰‹æ“ä½œçš„ä»»å‹™ï¼Œå¸¸å±•ç¾è§£æ±ºå¯¦éš›å•é¡Œçš„è¡Œç‚ºã€‚åå¥½æˆ¶å¤–ã€æ©Ÿæ¢°ã€å·¥å…·æˆ–é«”åŠ›æ´»å‹•ï¼Œè¼ƒå°‘æŠ½è±¡æˆ–äººéš›äº’å‹•ã€‚å–œæ­¡æ˜ç¢ºçš„å·¥ä½œç’°å¢ƒèˆ‡å¯¦éš›æˆæœã€‚'],[2,'I.ç ”ç©¶å‹ï¼šå–œæ­¡æ€è€ƒã€æ¢ç©¶ã€é©—è­‰ç†è«–ï¼Œå±•ç¾å‡ºé‚è¼¯æ¨ç†èˆ‡ç¨ç«‹è§£æ±ºå•é¡Œçš„è¡Œç‚ºã€‚åå¥½æ•¸ç†ã€ç§‘å­¸ã€é†«å­¸ç­‰éœ€è¦æ·±å…¥åˆ†æçš„å·¥ä½œï¼Œå°å¯¦é©—èˆ‡çŸ¥è­˜è¿½æ±‚æ„Ÿåˆ°èˆˆå¥®ã€‚'],[3,'A.è—è¡“å‹ï¼šé‡è¦–è‡ªæˆ‘è¡¨é”èˆ‡å‰µé€ ã€‚å¸¸å±•ç¾å‰µæ„ç™¼æƒ³ã€è—è¡“å‰µä½œæˆ–éå‚³çµ±æ€ç¶­çš„è¡Œç‚ºã€‚åå¥½éŸ³æ¨‚ã€ç¹ªç•«ã€è¨­è¨ˆã€è¡¨æ¼”ç­‰è‡ªç”±åº¦é«˜çš„æ´»å‹•ï¼Œè¨å­éåº¦åƒµåŒ–çš„è¦ç¯„ã€‚'],[4,'S.ç¤¾æœƒå‹ï¼šå–œæ­¡åŠ©äººã€å”ä½œèˆ‡å¼•å°ä»–äººã€‚å¸¸å±•ç¾å‚¾è½ã€æ•™å°ã€æ”¯æŒä»–äººçš„è¡Œç‚ºã€‚åå¥½æºé€šã€äººéš›äº’å‹•èˆ‡æœå‹™å·¥ä½œï¼Œæ¨‚æ–¼å»ºç«‹å’Œè«§é—œä¿‚ã€‚'],[5,'E.ä¼æ¥­å‹ï¼šå–œæ­¡å½±éŸ¿èˆ‡èªªæœä»–äººï¼Œå±•ç¾é ˜å°ã€çµ„ç¹”èˆ‡æ±ºç­–çš„è¡Œç‚ºã€‚åå¥½å……æ»¿æŒ‘æˆ°èˆ‡ç«¶çˆ­çš„ç’°å¢ƒï¼Œæ¨‚æ–¼æ‰¿æ“”é¢¨éšªä¸¦è¿½æ±‚æˆå°±ã€‚'],[6,'C.äº‹å‹™å‹ï¼šå–œæ­¡æœ‰çµæ§‹èˆ‡ç§©åºçš„ç’°å¢ƒã€‚å¸¸å±•ç¾ç²¾æº–ã€è€å¿ƒã€è¿½æ±‚æ•ˆç‡çš„è¡Œç‚ºã€‚åå¥½è™•ç†æ•¸æ“šã€æ–‡ä»¶ã€æµç¨‹ï¼Œæ“…é•·åœ¨è¦ç¯„ä¸‹å®Œæˆä»»å‹™ã€‚']
  ];
  const miOpts = [
    [1,'é‚è¼¯æ•¸å­¸ï¼šæ“…é•·æ¨ç†æ€è€ƒï¼Œå–œæ­¡æå•å°‹æ‰¾ç­”æ¡ˆï¼Œå°ç›Šæ™ºéŠæˆ²ã€æ¨ç†è§£é¡Œæ´»å‹•å¾ˆæ„Ÿèˆˆè¶£ã€‚'],
    [2,'èªè¨€æ–‡å­—ï¼šå£é½’ä¼¶ä¿ï¼Œå–„æ–¼è¡¨é”ã€‚ç”¨è©è±å¯Œï¼Œå…·èªªæœåŠ›ã€‚èƒ½è¨€å–„é“ï¼Œå–œæ­¡ç™¼å•ã€é–±è®€ã€æ’°å¯«å‰µä½œã€‚'],
    [3,'è‡ªç„¶è§€å¯Ÿï¼šå–œæ­¡è§€å¯Ÿå¤§è‡ªç„¶ç”Ÿæ…‹ï¼Œå°é£¼é¤Šå‹•ç‰©ã€æ ½ç¨®æ¤ç‰©æœ‰æ¿ƒåšèˆˆè¶£ï¼Œå°å‘¨åœç’°å¢ƒå……æ»¿å¥½å¥‡å¿ƒã€‚'],
    [4,'è‚¢é«”å‹•è¦ºï¼šæ“…é•·é‹ç”¨èº«é«”è¡¨é”æƒ³æ³•å’Œæ„Ÿå—ï¼Œå–œæ­¡å‹•æ‰‹æ“ä½œï¼Œåå¥½ä»¥æ´»å‹•ç‚ºä¸»çš„å·¥ä½œèˆ‡å­¸ç¿’å‹æ…‹ã€‚'],
    [5,'ç©ºé–“è—è¡“ï¼šç¿’æ…£ç”¨æ„è±¡åŠåœ–åƒä¾†æ€è€ƒï¼Œå–œæ­¡æ‹¼åœ–ã€è¿·å®®ã€æ„›ç¹ªç•«ã€è¨­è¨ˆåŠç©ºé–“è¦åŠƒã€‚'],
    [6,'éŸ³æ¨‚æ—‹å¾‹ï¼šèƒ½è¼•æ˜“è¨˜ä½æ­Œæ›²ã€æ—‹å¾‹åŠè¾¨åˆ¥éŸ³èª¿ï¼Œå¯ä»¥è¼•é¬†å­¸æœƒæ¨‚å™¨ï¼Œå·¥ä½œå­¸ç¿’åå¥½æ­é…éŸ³æ¨‚æ—‹å¾‹ã€‚'],
    [7,'äººéš›äº’å‹•ï¼šæ“…é•·è§€å¯Ÿäººçš„æƒ…ç·’ï¼Œå–œæ­¡åƒèˆ‡åœ˜é«”æ´»å‹•ã€‚å–„æ–¼æ¿€å‹µä»–äººï¼Œå–œæ­¡æ‰®æ¼”åœ˜é«”é ˜å°è€…çš„è§’è‰²ã€‚'],
    [8,'å…§çœåŒç†ï¼šæ“…é•·æ¢ç´¢è‡ªå·±åŠåŒç†ä»–äººï¼Œèƒ½æ„è­˜åˆ°è‡ªå·±æƒ…ç·’èˆ‡æƒ³æ³•ï¼Œèƒ½å®‰éœç¨è™•ï¼Œæ¸…æ¥šè‡ªå·±çš„å„ªç¼ºé»ã€‚']
  ];

  const sample = {
    step:1,
    g1:2,
    g2_dept:'æˆ‘æ˜¯æ™®é€šé«˜ä¸­å­¸ç”Ÿ',
    g2_isHS:true,
    club:'å‰ä»–ç¤¾/æ•™å­¸çµ„çµ„é•·/è¨­è¨ˆèˆ‡åŸ·è¡Œå‰ä»–æ•™å­¸èª²ç¨‹ï¼Œåé„‰æœå‹™éšŠ/æ´»å‹•éƒ¨éƒ¨é•·/çµ±ç±Œè¨­è¨ˆè®“åœ‹å°å­¸ç”Ÿæ¢ç´¢å·¥ä½œä¸–ç•Œçš„å„é …æ´»å‹•ã€‚',
    riasec:[4,5],
    mi:[8,7,2],
    flow1:'åœ‹ä¸€çš„å¯’å‡åƒåŠ å››å¤©ä¸‰å¤œçš„å…¨åœ‹å¤§éœ²ç‡Ÿï¼Œæ“”ä»»å°éšŠé•·è² è²¬å¸¶é ˜å°éšŠæˆå“¡åŸ·è¡Œå„é …ä»»å‹™èˆ‡ç«¶è³½ï¼Œé ˜å°çš„å°çµ„ç²å¾—ç²¾ç¥ç¸½éŒ¦æ¨™çš„ç¬¬ä¸‰åã€‚',
    flow2:'åœ‹ä¸‰å‡é«˜ä¸€æš‘å‡ç”¨äºŒé€±çš„æ™‚é–“è·Ÿæ•™æœƒå¼Ÿå…„å§Šå¦¹é¨è‡ªè¡Œè»Šç’°å³¶ï¼Œé›–ç„¶éç¨‹é‡åˆ°å¾ˆå¤šç‹€æ³èˆ‡å•é¡Œï¼Œä½†æ˜¯åœ¨å¤§å®¶åœ˜éšŠåˆä½œèˆ‡äº’ç›¸å”åŠ©ä¸‹é‚„æ˜¯é †åˆ©å®ŒæˆæŒ‘æˆ°ã€‚é€™å€‹æ´»å‹•ä¸åƒ…åŸ¹é¤Šäº†æˆ‘çš„å¿ƒç†ç´ è³ªï¼Œä¹Ÿè®“æˆ‘é‡æ–°èªè­˜å°ç£ã€‚',
    flow3:'é«˜ä¸€ä¸‹å­¸æœŸæ“”ä»»è¼”å°å¿—å·¥åœ˜å¿ƒéˆé›»å½±é™¢ç¸½å¬é›†äººï¼Œè®“å…¨æ ¡åŒå­¸ç”¨é›»å½±èªè­˜è‡ªå·±ã€‚çœ‹è¦‹è‡ªå·±å–œæ­¡ç”¨å¯“æ•™æ–¼æ¨‚çš„æ–¹å¼å¹«å¿™å¤§å®¶ã€‚',
    flow4:'é«˜äºŒä¸Šå­¸æœŸæ“”ä»»å­¸æ ¡æ¨‚éšŠæŒ‡æ®ï¼Œåˆ©ç”¨èª²é¤˜æ™‚é–“ï¼†æ˜ŸæœŸå‡æ—¥æ®æ±—ç·´ç¿’ã€‚åœ¨é«˜äºŒä¸‹å¸¶é ˜æ¨‚éšŠç²å¾—å…¨åœ‹è»æ¨‚ç«¶è³½äºè»ï¼Œå€‹äººä¹Ÿç²å¾—æœ€ä½³æŒ‡æ®ã€‚',
    flow5:'é«˜äºŒå‡é«˜ä¸‰æš‘å‡æ“”ä»»åŸé„‰éŸ³æ¨‚å¤ä»¤ç‡Ÿå‰¯ç¸½å¬ï¼Œé™ªä¼´åŸä½æ°‘å­©ç«¥å­¸ç¿’ç”¨éŸ³æ¨‚è¡¨é”è‡ªå·±ï¼Œä¸¦ä¸”è®“å­©ç«¥åœ¨éƒ¨è½è±å¹´ç¥­é€²è¡Œæ¼”å‡ºï¼Œç²å¾—éƒ¨è½é•·è€å€‘åŠç¸£åºœæ•™è‚²å±€é•·çš„è‚¯å®šã€‚'
  };

  /* --------- UI Helpers --------- */
  const progress = () => {
    const pct = Math.round(Math.min(S.step,S.total)/S.total*100);
    return `<div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="${pct}"><div class="bar" style="width:${pct}%"></div></div>`;
  };
  const nav = () => { const nextLabel = (S.step===12)?'ç”Ÿæˆå¬å–šAIçš„Prompt â†’':'ä¸‹ä¸€é¡Œ â†’'; return `<div class="toolbar">${S.step>1?'<button class="btn ghost" id="prev">â† ä¸Šä¸€é¡Œ</button>':''}${S.step<S.total?`<button class="btn" id="next">${nextLabel}</button>`:'<button class="btn" id="gen">ç”Ÿæˆå½™æ•´ â†’</button>'}</div>`; };

  const chips = (opts, selected, capOrSingle) => {
    const multi = Array.isArray(selected);
    let html = '<div class="grid cols-2">';
    for(const [id,text] of opts){
      const isSel = multi ? selected.includes(id) : selected===id;
      const order = multi && isSel ? (selected.indexOf(id)+1) : '';
      html += `<button type="button" class="chip${isSel?' sel':''}" data-id="${id}" ${order?`data-order="${order}"`:''} aria-pressed="${isSel}"><b>(${id})</b><span>${text}</span></button>`;
    }
    html += '</div>';
    setTimeout(()=>{
      stage.querySelectorAll('.chip').forEach(el=>{
        el.onclick = () => {
          const id = +el.getAttribute('data-id');
          if(!multi){ capOrSingle(id); }else{ toggleMulti(selected, id, capOrSingle); }
          render();
        };
        el.onkeydown = e=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); el.click(); } };
      });
    },0);
    return html;
  };
  const toggleMulti = (arr, id, cap) => {
    const i = arr.indexOf(id);
    if(i>=0){ arr.splice(i,1); return; }
    if(arr.length < cap){ arr.push(id); }
  };
  const selStrip = (opts, selected, arrRef) => {
    if(!selected.length) return '<div class="hint">å°šæœªé¸æ“‡ã€‚</div>';
    let h = '<div class="sel-strip">';
    for(const id of selected){
      const text = (opts.find(o=>o[0]===id)||[])[1] || '';
      h += `<span class="sel-pill"><b>(${id})</b><span>${text.replace(/<[^>]+>/g,'')}</span><button data-id="${id}" aria-label="ç§»é™¤">Ã—</button></span>`;
    }
    h += '</div>';
    setTimeout(()=>{
      stage.querySelectorAll('.sel-pill button').forEach(b=>{
        b.onclick = ()=>{ const id = +b.getAttribute('data-id'); const i = arrRef.indexOf(id); if(i>=0){ arrRef.splice(i,1); render(); } };
      });
    },0);
    return h;
  };
  const qWrap = (title, hint, inner) => {
    stage.innerHTML = `${progress()}<section class="card" style="padding:16px">
      <div class="qtitle">${title}</div>
      ${hint?`<div class="hint">${hint}</div>`:''}
      <div class="grid" style="margin-top:10px">${inner}</div>
      ${nav()}
    </section>`;
    const prev = stage.querySelector('#prev'), next = stage.querySelector('#next'), gen = stage.querySelector('#gen');
    if(prev) prev.onclick = ()=>{ S.step--; render(); };
    if(next) next.onclick = ()=>{ S.step++; render(); };
    if(gen)  gen.onclick  = ()=>{ S.step = S.total; render(); };
  };
  const escapeHTML = s => String(s??'').replace(/[&<>]/g, ch => ({'&':'&amp;','<':'&lt;','>':'&gt;'}[ch]));

  /* --------- Open ChatGPT / Gemini / Copilot --------- */
  
  function openGemini(){ window.open('https://gemini.google.com/app', '_blank', 'noopener'); }
  function openCopilot(){ window.open('https://copilot.microsoft.com/', '_blank', 'noopener'); }

  function openChatGPTApp(){
    const webUrl = 'https://chatgpt.com/';
    const universalUrl = 'https://chat.openai.com/';
    const schemeUrl = 'chatgpt://';
    const isIOS = /iphone|ipad|ipod/i.test(navigator.userAgent);
    const isAndroid = /android/i.test(navigator.userAgent);
    let fallbackTimer;

    const fallback = () => {
      window.open(universalUrl, '_blank', 'noopener') || window.open(webUrl, '_blank', 'noopener');
    };

    const onVis = () => { if (document.hidden){ clearTimeout(fallbackTimer); document.removeEventListener('visibilitychange', onVis); } };
    document.addEventListener('visibilitychange', onVis);

    try{
      if(isIOS){
        const iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        iframe.src = schemeUrl;
        document.body.appendChild(iframe);
        fallbackTimer = setTimeout(fallback, 700);
        setTimeout(()=>iframe.remove(), 1500);
      }else if(isAndroid){
        location.href = schemeUrl;
        fallbackTimer = setTimeout(fallback, 700);
      }else{
        fallback();
      }
    }catch(e){
      fallback();
    }
  }

  /* --------- Render --------- */
  function render(){
    landing.hidden = (S.step >= 1);
    switch(S.step){
      case 1:
        qWrap('1. æˆ‘ç›®å‰å°±è®€ï¼Ÿ','è«‹å¾ä¸‹åˆ—é¸é …ä¸­ï¼Œé¸å‡ºä¸€å€‹ç¬¦åˆè‡ªå·±ç¾æ³ã€‚', chips(gradeOpts, S.g1, (id)=>S.g1=id));
        break;
      case 2:
        qWrap('2. æˆ‘ç›®å‰æ˜¯å°±è®€å“ªä¸€ç§‘æˆ–é‚£å€‹ç­ï¼Ÿ','æŠ€è·é«˜ä¸­è«‹è¼¸å…¥ç§‘åˆ¥ï¼Œä¾‹å¦‚ï¼šè³‡è¨Šè™•ç†ç§‘ã€‚ç‰¹æ®Šç­ï¼Œè«‹è¼¸å…¥ç­ç´šé¡å‹ã€‚ä¾‹å¦‚ï¼šè‡ªç„¶è³‡å„ªç­ã€èªè¨€è³‡å„ªç­ã€é«”è‚²ç­ã€ç¾è¡“ç­...ã€‚å¦‚æœä½ æ˜¯æ™®é€šé«˜ä¸­å­¸ç”Ÿï¼Œè«‹å‹¾é¸æ–‡å­—æ¡†ä¸‹æ–¹çš„ã€Œæˆ‘æ˜¯æ™®é€šé«˜ä¸­å­¸ç”Ÿã€é¸é …ã€‚', `
          <div class="row">
            <input class="field" id="dept" placeholder="è³‡è¨Šè™•ç†ç§‘" value="${escapeHTML(S.g2_dept)}" ${S.g2_isHS?'disabled':''} aria-label="å°±è®€ç§‘åˆ¥">
            <label class="hint"><input type="checkbox" id="hs" ${S.g2_isHS?'checked':''}> æˆ‘æ˜¯æ™®é€šé«˜ä¸­å­¸ç”Ÿ</label>
          </div>`);
        stage.querySelector('#dept').oninput = e=> S.g2_dept = e.target.value;
        stage.querySelector('#hs').onchange = e=>{ S.g2_isHS = e.target.checked; if(S.g2_isHS){ S.g2_dept='æˆ‘æ˜¯æ™®é€šé«˜ä¸­å­¸ç”Ÿ'; } else { S.g2_dept=''; } render(); };
        break;
      case 3:
        qWrap('3. æˆ‘åœ¨ä»¥å‰ï¼ˆé«˜ä¸­è·ã€åœ‹ä¸­å°...ï¼‰åƒåŠ éå“ªäº›ç¤¾åœ˜ï¼Œæ“”ä»»ä»€éº¼è·å‹™ï¼Ÿ','è«‹æŒ‰ç…§ç¯„ä¾‹çš„æ ¼å¼æ’°å¯«ã€‚å¯è¼¸å…¥å¤šå€‹ç¤¾åœ˜åç¨±/è·å‹™åç¨±/è² è²¬å·¥ä½œï¼Œä¸åŒç¤¾åœ˜åç¨±/è·å‹™åç¨±/è² è²¬å·¥ä½œé–“ï¼Œè«‹ç”¨ã€Œï¼Œã€å€éš”ã€‚ä¾‹å¦‚ï¼šå‰ä»–ç¤¾/æ•™å­¸çµ„çµ„é•·/è¨­è¨ˆèˆ‡åŸ·è¡Œå‰ä»–æ•™å­¸èª²ç¨‹ï¼Œåé„‰æœå‹™éšŠ/æ´»å‹•éƒ¨éƒ¨é•·/çµ±ç±Œè¨­è¨ˆè®“åœ‹å°å­¸ç”Ÿæ¢ç´¢å·¥ä½œä¸–ç•Œçš„å„é …æ´»å‹•ã€‚', `<div class="row">
          <textarea class="field" id="club" ${S.club_none?'disabled':''} placeholder="å‰ä»–ç¤¾/æ•™å­¸çµ„çµ„é•·/è¨­è¨ˆèˆ‡åŸ·è¡Œå‰ä»–æ•™å­¸èª²ç¨‹ï¼Œåé„‰æœå‹™éšŠ/æ´»å‹•éƒ¨éƒ¨é•·/çµ±ç±Œè¨­è¨ˆè®“åœ‹å°å­¸ç”Ÿæ¢ç´¢å·¥ä½œä¸–ç•Œçš„å„é …æ´»å‹•ã€‚">${escapeHTML(S.club)}</textarea>
          <label class="hint"><input type="checkbox" id="clubn" ${S.club_none?'checked':''}> ç„¡</label>
        </div>`);
        stage.querySelector('#club').oninput = e=> S.club = e.target.value;
        stage.querySelector('#clubn').onchange = e=>{ S.club_none = e.target.checked; render(); };
        break;
      case 4:
        qWrap('4. æˆ‘çš„ç”Ÿæ¶¯èˆˆè¶£æ¸¬é©—çµæœé¡¯ç¤ºï¼Œæˆ‘æ¯”è¼ƒä¾†å‹çš„äºŒå€‹ç”Ÿæ¶¯èˆˆè¶£ä¾åºæ˜¯ï¼Ÿ','è«‹å¾å…­å€‹é¸é …ä¸­ä¾åºé¸æ“‡å…©å€‹ã€‚è‹¥ä¸æ¸…æ¥šè‡ªå·±çš„ç”Ÿæ¶¯èˆˆè¶£ï¼Œå¯å…ˆç”¨104ç”Ÿæ¶¯èˆˆè¶£æ¸¬é©—é€²è¡Œæ¢ç´¢ï¼š<a href="https://guide.104.com.tw/interest/" target="_blank" rel="noopener">å‰å¾€104ç”Ÿæ¶¯èˆˆè¶£æ¸¬é©—</a>', selStrip(riasecOpts, S.riasec, S.riasec) + chips(riasecOpts, S.riasec, 2) + `<div class="hint">å·²é¸ ${S.riasec.length} / 2ï¼ˆå¯é»é¸å–æ¶ˆï¼Œè™Ÿç¢¼æœƒè‡ªå‹•å‰ç§»ï¼‰</div>`);
        break;
      case 5:
        qWrap('5. æ ¹æ“šæˆ‘å°è‡ªå·±çš„ç­è§£èˆ‡åˆ¥äººçš„å›é¥‹ï¼Œæˆ‘æ¯”è¼ƒæ“…é•·çš„ä¸‰å€‹å¤šå…ƒæ™ºèƒ½ä¾åºæ˜¯ï¼Ÿ','è«‹å¾å…«å€‹é¸é …ä¸­ä¾åºé¸æ“‡ä¸‰å€‹ã€‚', selStrip(miOpts, S.mi, S.mi) + chips(miOpts, S.mi, 3) + `<div class="hint">å·²é¸ ${S.mi.length} / 3</div>`);
        break;
      /* æ–°å¢çš„å¿ƒæµæ™‚å…‰èªªæ˜é  */
      case 6:
        qWrap('å¿ƒæµæ™‚å…‰èªªæ˜','',`
          <p>â™¨ <b>ä½•è¬‚å¿ƒæµï¼Ÿ</b><br>
          ç•¶æ‚¨åœ¨åšä¸€ä»¶è‡ªå·±å…¨å¿ƒæŠ•å…¥ç†±æ„›çš„äº‹ï¼Œå³ä¾¿é€™ä»¶äº‹éœ€è¦æ‚¨ç”¨ç›¡æ‰€æœ‰çš„å¿ƒåŠ›ï¼Œä½†æ‚¨ä»è¦ºå¾—è‡ªå·±å……æ»¿èƒ½é‡ï¼Œé€™æ™‚æ‚¨å°±æ˜¯é€²å…¥äº†ã€Œå¿ƒæµã€ç‹€æ…‹ã€‚</p>
          <p>ğŸ˜€ <b>é€²å…¥å¿ƒæµæ™‚å…‰æœƒæœ‰ä»€éº¼æ„Ÿå—ï¼Ÿ</b><br>
          æœ‰æˆå°±æ„Ÿã€æœ‰æŒ‘æˆ°æ„Ÿã€å¦‚é­šå¾—æ°´ã€å¿ƒæƒ³äº‹æˆã€æ¬²ç½·ä¸èƒ½ã€å¿˜è¨˜æ™‚é–“ã€‚</p>
          <p>â˜… <b>å¿ƒæµæ™‚å…‰å¸¸æœƒå‡ºç¾åœ¨é€™äº›ç”Ÿå‘½ç¶“æ­·ï¼š</b><br>
          æ›¾åƒèˆ‡éçš„æ´»å‹•ï¼šç¤¾åœ˜ã€çƒéšŠã€æ•™è‚²è¨“ç·´ã€ç•™å­¸äº¤æ›ã€æ—…è¡Œâ€¦<br>
          äº’å‹•åˆä½œéçš„äººï¼šå¥½å‹ã€åŒå­¸ã€å¸«é•·ã€å¹«åŠ©æ‚¨çš„äººã€èƒŒå›æ‚¨çš„äººâ€¦<br>
          çœ‹éçš„æ›¸æˆ–å½±ç‰‡ï¼šæ¼«ç•«ã€å°èªªã€æ•£æ–‡ã€ç¹ªæœ¬ã€é›»å½±ã€å‹•æ¼«ã€é€£çºŒåŠ‡â€¦<br>
          é‡è¦çš„äººç”Ÿç¶“æ­·ï¼šåšéçš„å·¥ä½œã€å»éçš„åœ°æ–¹ã€å¾—éçš„æ¦®è­½ã€å¤±å»çš„â€¦</p>
          <p>ğŸ‘‰ æ¥ä¸‹ä¾†è¦æ‚¨ç”¨ç›´è¦ºçš„æ–¹å¼ï¼Œå¯«å‡ºã€Œäº”å€‹ã€è®“æ‚¨æœ€æœ‰å¿ƒæµæ™‚å…‰çš„ç”Ÿå‘½äº‹ä»¶ã€‚<br>
          æ¯æ®µå¿ƒæµäº‹ä»¶åŒ…å«ï¼š<b>BARä¸‰å€‹å…ƒç´ </b>ã€‚å…¶ä¸­<b>Backgroudï¼ˆèƒŒæ™¯ï¼‰</b>ï¼ŒæŒ‡çš„æ˜¯é€™å€‹å¿ƒæµæ™‚å…‰äº‹ä»¶ç™¼ç”Ÿçš„æ™‚é–“æˆ–èƒŒæ™¯ã€‚ç¬¬äºŒå¥çš„<b>Actionï¼ˆè¡Œå‹•ï¼‰</b>ï¼Œè¡¨ç¤ºåœ¨é€™å€‹å¿ƒæµæ™‚å…‰äº‹ä»¶ä½ åšäº†å“ªäº›äº‹æƒ…ã€‚ç¬¬ä¸‰å¥çš„<b>Resultï¼ˆçµæœï¼‰</b>ï¼Œè¡¨ç¤ºé€™å€‹å¿ƒæµæ™‚å…‰äº‹ä»¶è®“ä½ ç²å¾—å“ªäº›å­¸ç¿’æˆæœã€‚<br>
          ä¾‹å¦‚ï¼šï¼ˆBackgroudï¼ŒèƒŒæ™¯ï¼‰åœ‹ä¸€çš„å¯’å‡åƒåŠ å››å¤©ä¸‰å¤œçš„å…¨åœ‹å¤§éœ²ç‡Ÿï¼Œï¼ˆActionï¼Œè¡Œå‹•ï¼‰æ“”ä»»å°éšŠé•·è² è²¬å¸¶é ˜å°éšŠæˆå“¡åŸ·è¡Œå„é …ä»»å‹™èˆ‡ç«¶è³½ï¼Œï¼ˆResultï¼Œçµæœï¼‰é ˜å°çš„å°çµ„ç²å¾—ç²¾ç¥ç¸½éŒ¦æ¨™çš„ç¬¬ä¸‰åã€‚</p>
        `);
        break;
      /* ä¸‹é¢é¡Œç›®å…¨éƒ¨é †å»¶ä¸€è™Ÿ */
      case 7:
        qWrap('6. æˆ‘æœ€æœ‰å¿ƒæµæ™‚å…‰çš„ä¸€æ¬¡ç”Ÿå‘½äº‹ä»¶æ˜¯ï¼Ÿ','ã€Œæ‰€è¬‚çš„ã€å¿ƒæµæ™‚å…‰ã€ï¼Œæ˜¯è®“äººè¦ºå¾—æ¯”è¼ƒä¾†å‹å¿˜æˆ‘ã€å¦‚é­šå¾—æ°´ã€å¿ƒæƒ³äº‹æˆã€æ¬²ç½·ä¸èƒ½çš„ç”Ÿå‘½äº‹ä»¶ã€‚æ¯å€‹å¿ƒæµæ™‚å…‰äº‹ä»¶çµ„åˆåŒ…å«ï¼šBARä¸‰å€‹å…ƒç´ ã€‚å…¶ä¸­Backgroudï¼ˆèƒŒæ™¯ï¼‰ï¼ŒæŒ‡çš„æ˜¯é€™å€‹å¿ƒæµæ™‚å…‰äº‹ä»¶ç™¼ç”Ÿçš„æ™‚é–“æˆ–èƒŒæ™¯ã€‚ç¬¬äºŒå¥çš„Actionï¼ˆè¡Œå‹•ï¼‰ï¼Œè¡¨ç¤ºåœ¨é€™å€‹å¿ƒæµæ™‚å…‰äº‹ä»¶ä½ åšäº†å“ªäº›äº‹æƒ…ã€‚ç¬¬ä¸‰å¥çš„Resultï¼ˆçµæœï¼‰ï¼Œè¡¨ç¤ºé€™å€‹å¿ƒæµæ™‚å…‰äº‹ä»¶è®“ä½ ç²å¾—å“ªäº›å­¸ç¿’æˆæœã€‚ä¾‹å¦‚ï¼šï¼ˆBackgroudï¼ŒèƒŒæ™¯ï¼‰åœ‹ä¸€çš„å¯’å‡åƒåŠ å››å¤©ä¸‰å¤œçš„å…¨åœ‹å¤§éœ²ç‡Ÿï¼Œï¼ˆActionï¼Œè¡Œå‹•ï¼‰æ“”ä»»å°éšŠé•·è² è²¬å¸¶é ˜å°éšŠæˆå“¡åŸ·è¡Œå„é …ä»»å‹™èˆ‡ç«¶è³½ï¼Œï¼ˆResultï¼Œçµæœï¼‰é ˜å°çš„å°çµ„ç²å¾—ç²¾ç¥ç¸½éŒ¦æ¨™çš„ç¬¬ä¸‰åã€‚ã€', `<div class="row">
          <textarea class="field" id="flow1" ${S.flow1_none?'disabled':''} placeholder="åœ‹ä¸€çš„å¯’å‡åƒåŠ å››å¤©ä¸‰å¤œçš„å…¨åœ‹å¤§éœ²ç‡Ÿï¼Œæ“”ä»»å°éšŠé•·è² è²¬å¸¶é ˜å°éšŠæˆå“¡åŸ·è¡Œå„é …ä»»å‹™èˆ‡ç«¶è³½ï¼Œé ˜å°çš„å°çµ„ç²å¾—ç²¾ç¥ç¸½éŒ¦æ¨™çš„ç¬¬ä¸‰åã€‚">${escapeHTML(S.flow1)}</textarea>
          <label class="hint"><input type="checkbox" id="flow1n" ${S.flow1_none?'checked':''}> ç„¡</label>
        </div>`);
        stage.querySelector('#flow1').oninput = e=> S.flow1 = e.target.value;
        stage.querySelector('#flow1n').onchange = e=>{ S.flow1_none = e.target.checked; render(); };
        break;
      case 8:
        qWrap('7. æˆ‘å¦ä¸€å€‹æ¯”è¼ƒæœ‰å¿ƒæµæ™‚å…‰æ„Ÿè¦ºçš„ç”Ÿå‘½ç¶“æ­·æ˜¯ï¼Ÿ','ä¾‹å¦‚ï¼šåœ‹ä¸‰å‡é«˜ä¸€æš‘å‡ç”¨äºŒé€±çš„æ™‚é–“è·Ÿæ•™æœƒå¼Ÿå…„å§Šå¦¹é¨è‡ªè¡Œè»Šç’°å³¶ï¼Œé›–ç„¶éç¨‹é‡åˆ°å¾ˆå¤šç‹€æ³èˆ‡å•é¡Œï¼Œä½†æ˜¯åœ¨å¤§å®¶åœ˜éšŠåˆä½œèˆ‡äº’ç›¸å”åŠ©ä¸‹é‚„æ˜¯é †åˆ©å®ŒæˆæŒ‘æˆ°ã€‚é€™å€‹æ´»å‹•ä¸åƒ…åŸ¹é¤Šäº†æˆ‘çš„å¿ƒç†ç´ è³ªï¼Œä¹Ÿè®“æˆ‘é‡æ–°èªè­˜å°ç£ã€‚', `<div class="row">
          <textarea class="field" id="flow2" ${S.flow2_none?'disabled':''} placeholder="åœ‹ä¸‰å‡é«˜ä¸€æš‘å‡ç”¨äºŒé€±çš„æ™‚é–“è·Ÿæ•™æœƒå¼Ÿå…„å§Šå¦¹é¨è‡ªè¡Œè»Šç’°å³¶ï¼Œé›–ç„¶éç¨‹é‡åˆ°å¾ˆå¤šç‹€æ³èˆ‡å•é¡Œï¼Œä½†æ˜¯åœ¨å¤§å®¶åœ˜éšŠåˆä½œèˆ‡äº’ç›¸å”åŠ©ä¸‹é‚„æ˜¯é †åˆ©å®ŒæˆæŒ‘æˆ°ã€‚é€™å€‹æ´»å‹•ä¸åƒ…åŸ¹é¤Šäº†æˆ‘çš„å¿ƒç†ç´ è³ªï¼Œä¹Ÿè®“æˆ‘é‡æ–°èªè­˜å°ç£ã€‚">${escapeHTML(S.flow2)}</textarea>
          <label class="hint"><input type="checkbox" id="flow2n" ${S.flow2_none?'checked':''}> ç„¡</label>
        </div>`);
        stage.querySelector('#flow2').oninput = e=> S.flow2 = e.target.value;
        stage.querySelector('#flow2n').onchange = e=>{ S.flow2_none = e.target.checked; render(); };
        break;
      case 9:
        qWrap('8. æˆ‘å¦ä¸€å€‹æ¯”è¼ƒæœ‰å¿ƒæµæ™‚å…‰æ„Ÿè¦ºçš„ç”Ÿå‘½ç¶“æ­·æ˜¯ï¼Ÿ','ä¾‹å¦‚ï¼šé«˜ä¸€ä¸‹å­¸æœŸæ“”ä»»è¼”å°å¿—å·¥åœ˜å¿ƒéˆé›»å½±é™¢ç¸½å¬é›†äººï¼Œè®“å…¨æ ¡åŒå­¸ç”¨é›»å½±èªè­˜è‡ªå·±ã€‚çœ‹è¦‹è‡ªå·±å–œæ­¡ç”¨å¯“æ•™æ–¼æ¨‚çš„æ–¹å¼å¹«å¿™å¤§å®¶ã€‚', `<div class="row">
          <textarea class="field" id="flow3" ${S.flow3_none?'disabled':''} placeholder="é«˜ä¸€ä¸‹å­¸æœŸæ“”ä»»è¼”å°å¿—å·¥åœ˜å¿ƒéˆé›»å½±é™¢ç¸½å¬é›†äººï¼Œè®“å…¨æ ¡åŒå­¸ç”¨é›»å½±èªè­˜è‡ªå·±ã€‚çœ‹è¦‹è‡ªå·±å–œæ­¡ç”¨å¯“æ•™æ–¼æ¨‚çš„æ–¹å¼å¹«å¿™å¤§å®¶ã€‚">${escapeHTML(S.flow3)}</textarea>
          <label class="hint"><input type="checkbox" id="flow3n" ${S.flow3_none?'checked':''}> ç„¡</label>
        </div>`);
        stage.querySelector('#flow3').oninput = e=> S.flow3 = e.target.value;
        stage.querySelector('#flow3n').onchange = e=>{ S.flow3_none = e.target.checked; render(); };
        break;
      case 10:
        qWrap('9. æˆ‘å¦ä¸€å€‹æ¯”è¼ƒæœ‰å¿ƒæµæ™‚å…‰æ„Ÿè¦ºçš„ç”Ÿå‘½ç¶“æ­·æ˜¯ï¼Ÿ','ä¾‹å¦‚ï¼šé«˜äºŒä¸Šå­¸æœŸæ“”ä»»å­¸æ ¡æ¨‚éšŠæŒ‡æ®ï¼Œåˆ©ç”¨èª²é¤˜æ™‚é–“ï¼†æ˜ŸæœŸå‡æ—¥æ®æ±—ç·´ç¿’ã€‚åœ¨é«˜äºŒä¸‹å¸¶é ˜æ¨‚éšŠç²å¾—å…¨åœ‹è»æ¨‚ç«¶è³½äºè»ï¼Œå€‹äººä¹Ÿç²å¾—æœ€ä½³æŒ‡æ®ã€‚', `<div class="row">
          <textarea class="field" id="flow4" ${S.flow4_none?'disabled':''} placeholder="é«˜äºŒä¸Šå­¸æœŸæ“”ä»»å­¸æ ¡æ¨‚éšŠæŒ‡æ®ï¼Œåˆ©ç”¨èª²é¤˜æ™‚é–“ï¼†æ˜ŸæœŸå‡æ—¥æ®æ±—ç·´ç¿’ã€‚åœ¨é«˜äºŒä¸‹å¸¶é ˜æ¨‚éšŠç²å¾—å…¨åœ‹è»æ¨‚ç«¶è³½äºè»ï¼Œå€‹äººä¹Ÿç²å¾—æœ€ä½³æŒ‡æ®ã€‚">${escapeHTML(S.flow4)}</textarea>
          <label class="hint"><input type="checkbox" id="flow4n" ${S.flow4_none?'checked':''}> ç„¡</label>
        </div>`);
        stage.querySelector('#flow4').oninput = e=> S.flow4 = e.target.value;
        stage.querySelector('#flow4n').onchange = e=>{ S.flow4_none = e.target.checked; render(); };
        break;
      case 11:
        qWrap('10. æˆ‘å¦ä¸€å€‹æ¯”è¼ƒæœ‰å¿ƒæµæ™‚å…‰æ„Ÿè¦ºçš„ç”Ÿå‘½ç¶“æ­·æ˜¯ï¼Ÿ','ä¾‹å¦‚ï¼šé«˜äºŒå‡é«˜ä¸‰æš‘å‡æ“”ä»»åŸé„‰éŸ³æ¨‚å¤ä»¤ç‡Ÿå‰¯ç¸½å¬ï¼Œé™ªä¼´åŸä½æ°‘å­©ç«¥å­¸ç¿’ç”¨éŸ³æ¨‚è¡¨é”è‡ªå·±ï¼Œä¸¦ä¸”è®“å­©ç«¥åœ¨éƒ¨è½è±å¹´ç¥­é€²è¡Œæ¼”å‡ºï¼Œç²å¾—éƒ¨è½é•·è€å€‘åŠç¸£åºœæ•™è‚²å±€é•·çš„è‚¯å®šã€‚', `<div class="row">
          <textarea class="field" id="flow5" ${S.flow5_none?'disabled':''} placeholder="é«˜äºŒå‡é«˜ä¸‰æš‘å‡æ“”ä»»åŸé„‰éŸ³æ¨‚å¤ä»¤ç‡Ÿå‰¯ç¸½å¬ï¼Œé™ªä¼´åŸä½æ°‘å­©ç«¥å­¸ç¿’ç”¨éŸ³æ¨‚è¡¨é”è‡ªå·±ï¼Œä¸¦ä¸”è®“å­©ç«¥åœ¨éƒ¨è½è±å¹´ç¥­é€²è¡Œæ¼”å‡ºï¼Œç²å¾—éƒ¨è½é•·è€å€‘åŠç¸£åºœæ•™è‚²å±€é•·çš„è‚¯å®šã€‚">${escapeHTML(S.flow5)}</textarea>
          <label class="hint"><input type="checkbox" id="flow5n" ${S.flow5_none?'checked':''}> ç„¡</label>
        </div>`);
        stage.querySelector('#flow5').oninput = e=> S.flow5 = e.target.value;
        stage.querySelector('#flow5n').onchange = e=>{ S.flow5_none = e.target.checked; render(); };
        break;
      case 12:
        qWrap('ç”Ÿæˆå¬å–šAIçš„Prompt','å¦‚æœè¦è¿”å›ä¿®æ”¹å…§å®¹ï¼Œè«‹é»é¸ã€Œâ†ä¸Šä¸€é¡Œã€ã€‚', `<div class="hint">å¦‚æœè¦ç›´æ¥ç”Ÿæˆç”Ÿæˆå¬å–šAIçš„Promptï¼Œè«‹é»ã€Œç”Ÿæˆå¬å–šAIçš„Promptâ†’ã€ã€‚</div>`);
        break;
      
      
      case 13:
        const text = compileText();
        stage.innerHTML = `${progress()}<section class="card" style="padding:16px">
          <div class="qtitle center">å°‡ç”Ÿæˆå¬å–šAIçš„Promptï¼Œè¤‡è£½åˆ°ChatGPTã€Geminiæˆ–Copilot</div>
          <div class="hint center">Step1.è«‹é»é¸ã€Œä¸€éµè¤‡è£½è²¼åˆ° AI çš„ Promptã€æŒ‰éˆ•ï¼Œè¤‡è£½ä¸Šè¿°çš„ Prompt å…§å®¹</div>
          <textarea id="out" class="field" aria-label="ç”Ÿæˆå¬å–šAIçš„Prompt">${escapeHTML(text)}</textarea>

          <div class="bigcopy">
            <button class="btn xl" id="copy">ä¸€éµè¤‡è£½è²¼åˆ°AIçš„Prompt</button>
          </div>

          <div class="hint center" style="margin-top:6px">Step2.å°‡è¤‡è£½çš„Promptè²¼åˆ°ä¸‹åˆ—ä»»ä½•ä¸€å€‹AIç¶²ç«™</div>
          <div class="appgrid">
            <div class="appcard" id="openChatGPT" title="é–‹å•Ÿ ChatGPT">
              <div class="appicon">
                <svg viewBox="0 0 24 24" width="28" height="28" aria-hidden="true"><circle cx="12" cy="12" r="10"/></svg>
              </div>
              <div class="appname">ChatGPT</div>
            </div>
            <div class="appcard" id="openGemini" title="é–‹å•Ÿ Gemini">
              <div class="appicon">
                <svg viewBox="0 0 24 24" width="28" height="28" aria-hidden="true"><path d="M12 2a5 5 0 0 1 5 5v4H7V7a5 5 0 0 1 5-5z"/><path d="M7 13h10v4a5 5 0 0 1-10 0v-4z"/></svg>
              </div>
              <div class="appname">Gemini</div>
            </div>
            <div class="appcard" id="openCopilot" title="é–‹å•Ÿ Copilot">
              <div class="appicon">
                <svg viewBox="0 0 24 24" width="28" height="28" aria-hidden="true"><rect x="3" y="3" width="8" height="8"/><rect x="13" y="3" width="8" height="8"/><rect x="3" y="13" width="8" height="8"/><rect x="13" y="13" width="8" height="8"/></svg>
              </div>
              <div class="appname">Copilot</div>
            </div>
          </div>

          <div class="hint center">å¦‚æœä½ è¦é‡æ–°ç”¢ç”Ÿä¸€å€‹æ–°çš„ Promptï¼Œè«‹é»é¸ã€Œé‡æ–°é–‹å§‹ã€çš„æŒ‰éˆ•</div>
          <div class="restartwrap"><button class="btn ghost" id="restart">é‡æ–°é–‹å§‹</button></div>
        </section>`;
        stage.querySelector('#copy').onclick = async ()=>{
          const txt = stage.querySelector('#out').value;
          try{ if(navigator.clipboard && window.isSecureContext){ await navigator.clipboard.writeText(txt); toast('å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼'); } else { fallbackCopy(txt); } }
          catch{ fallbackCopy(txt); }
        };
        stage.querySelector('#restart').onclick = ()=> reset();
        stage.querySelector('#openChatGPT').onclick = openChatGPTApp;
        stage.querySelector('#openGemini').onclick = openGemini;
        stage.querySelector('#openCopilot').onclick = openCopilot;
        break;
    }
  }

  function findText(opts, id){ const f = opts.find(o=>o[0]===id); return f?f[1]:''; }
  function compileText(){
    const L1 = `1.æˆ‘ç›®å‰å°±è®€ï¼š${findText([[1,'æ™®é€šå‹é«˜ä¸­ä¸€å¹´ç´š'],[2,'æ™®é€šå‹é«˜ä¸­äºŒï½ä¸‰å¹´ç´šï¼šäººæ–‡æ³•æ”¿é¡'],[3,'æ™®é€šå‹é«˜ä¸­äºŒï½ä¸‰å¹´ç´šï¼šè²¡ç¶“å•†ç®¡é¡'],[4,'æ™®é€šå‹é«˜ä¸­äºŒï½ä¸‰å¹´ç´šï¼šç§‘æŠ€å·¥ç¨‹é¡'],[5,'æ™®é€šå‹é«˜ä¸­äºŒï½ä¸‰å¹´ç´šï¼šç”Ÿé†«è¡›è­·é¡'],[6,'æŠ€è·å‹é«˜ä¸­'],[7,'å…¶ä»–']], S.g1) || 'ï¼ˆæœªé¸ï¼‰'}ã€‚`;
    const L2 = `2.æˆ‘ç›®å‰å°±è®€å“ªä¸€ç§‘æˆ–é‚£å€‹ç­ï¼š${S.g2_dept || 'ï¼ˆæœªå¡«ï¼‰'}ã€‚`;
    const L3 = `3.æˆ‘åœ¨ç¤¾åœ˜æ“”ä»»ï¼š${S.club_none?'ç„¡':(S.club||'ï¼ˆæœªå¡«ï¼‰')}ã€‚`;
    const L4 = '4.æˆ‘æ¯”è¼ƒä¾†å‹çš„äºŒå€‹ç”Ÿæ¶¯èˆˆè¶£æ˜¯ï¼š\n' + (S.riasec.length? S.riasec.map(id=>`(${id}) ${findText(riasecOpts,id)}`).join('\n') : 'æœªé¸æ“‡');
    const L5 = '5.æˆ‘æ¯”è¼ƒæ“…é•·çš„ä¸‰å€‹å¤šå…ƒæ™ºèƒ½ï¼š\n' + (S.mi.length? S.mi.map(id=>`(${id}) ${findText(miOpts,id)}`).join('\n') : 'æœªé¸æ“‡');
    const L6 = '6.æˆ‘æœ€æœ‰å¿ƒæµæ™‚å…‰çš„ä¸€æ¬¡ç”Ÿå‘½äº‹ä»¶æ˜¯ï¼š\n' + (S.flow1_none?'ç„¡':(S.flow1||'ï¼ˆæœªå¡«ï¼‰'));
    const L7 = '7.æˆ‘å¦ä¸€å€‹æ¯”è¼ƒæœ‰å¿ƒæµæ™‚å…‰æ„Ÿè¦ºçš„ç”Ÿå‘½ç¶“æ­·æ˜¯ï¼š\n' + (S.flow2_none?'ç„¡':(S.flow2||'ï¼ˆæœªå¡«ï¼‰'));
    const L8 = '8.æˆ‘å¦ä¸€å€‹æ¯”è¼ƒæœ‰å¿ƒæµæ™‚å…‰æ„Ÿè¦ºçš„ç”Ÿå‘½ç¶“æ­·æ˜¯ï¼š\n' + (S.flow3_none?'ç„¡':(S.flow3||'ï¼ˆæœªå¡«ï¼‰'));
    const L9 = '9.æˆ‘å¦ä¸€å€‹æ¯”è¼ƒæœ‰å¿ƒæµæ™‚å…‰æ„Ÿè¦ºçš„ç”Ÿå‘½ç¶“æ­·æ˜¯ï¼š\n' + (S.flow4_none?'ç„¡':(S.flow4||'ï¼ˆæœªå¡«ï¼‰'));
    const L10= '10.æˆ‘å¦ä¸€å€‹æ¯”è¼ƒæœ‰å¿ƒæµæ™‚å…‰æ„Ÿè¦ºçš„ç”Ÿå‘½ç¶“æ­·æ˜¯ï¼š\n' + (S.flow5_none?'ç„¡':(S.flow5||'ï¼ˆæœªå¡«ï¼‰'));

    const tail = [
'',
'è«‹ä½ æ“”ä»»æˆ‘çš„ã€ŒAIè·æ¶¯æ•™ç·´ã€ï¼Œ',
'æ ¹æ“šä¸Šè¿°å¿ƒæµæ™‚å…‰åœ–åŠç”Ÿæ¶¯èˆˆè¶£æ¸¬é©—çµæœçš„äºŒé …è³‡è¨Šï¼Œä»¥ç”Ÿæ¶¯è¼”å°çš„å°ˆæ¥­ï¼Œè€ƒé‡æˆ‘ç›®å‰å°±è®€çš„å°ˆæ¥­é¡åˆ¥ï¼ˆè«‹å‹™å¿…è€ƒé‡æˆ‘åœ¨ç¬¬1é …ï¼†ç¬¬äºŒé …çš„å›ç­”å…§å®¹ã€‚ä¾‹å¦‚ï¼šæˆ‘æ˜¯å°±è®€æŠ€è¡“å‹é«˜ä¸­çš„é‚£å€‹ç§‘åˆ¥ï¼›æˆ–æˆ‘æ˜¯å°±è®€æ™®é€šé«˜ä¸­äºŒå¹´ç´šï½ä¸‰å¹´ç´šçš„é‚£å€‹é¡åˆ¥ã€‚ï¼‰ï¼Œä»¥å­¸ç¿’æ­·ç¨‹æª”æ¡ˆæè¿°çš„æ–¹å¼ï¼Œå®Œæˆä¸€ä»½å®Œæ•´çš„ã€Œç”Ÿæ¶¯èˆˆè¶£æ¢ç´¢æˆæœå­¸ç¿’æ­·ç¨‹æª”æ¡ˆã€ã€‚',
'',
'è«‹å…ˆç‚ºé€™å€‹ã€Œç”Ÿæ¶¯èˆˆè¶£æ¢ç´¢æˆæœå­¸ç¿’æ­·ç¨‹æª”æ¡ˆã€å–ä¸€å€‹åç¨±ã€‚',
'åç¨±çš„å–åï¼Œè«‹ä¾æ•´ä»½å­¸ç¿’æ­·ç¨‹æª”æ¡ˆçš„å…§å®¹ï¼Œå–ä¸€å€‹å¯ä»¥å‡¸é¡¯æˆ‘æ¢ç´¢çµæœï¼Œæ¸…æ¥šæ˜“æ‡‚ã€ç•«é¾é»ç›çš„æ¨™é¡Œã€‚',
'æ¥è‘—ï¼Œè«‹æä¾›ä¸€æ®µ100å€‹å­—çš„æ‘˜è¦ã€‚',
'æ‘˜è¦çš„å…§å®¹ï¼Œå¯ä»¥è®“è®€è€…æ¸…æ¥šåœ°çŸ¥æ‚‰æˆ‘çš„ç”Ÿæ¶¯èˆˆè¶£æ¢ç´¢æˆæœï¼ŒåŠæœªä¾†æƒ³è¦åŸ·è¡Œçš„ç”Ÿæ¶¯æ¢ç´¢æ´»å‹•ã€‚',
'',
'æ¥è‘—è«‹ä¾åºå®Œæˆä»¥ä¸‹å››å€‹æ®µè½ã€‚æ¯å€‹æ®µè½éœ€æœ‰ã€Œå¤§æ¨™é¡Œã€åŠå‘¼æ‡‰å¤§æ¨™é¡Œï¼†å‡¸é¡¯è©²æ®µè½å…§å®¹çš„ã€Œå‰¯æ¨™é¡Œï¼ˆä¸€å¥è©±ï¼‰ã€ï¼Œæ¥è‘—å†è¼¸å‡ºå®Œæ•´æ®µè½å…§å®¹ã€‚',
'ä»¥ä¸‹æ˜¯å››å€‹è¦å®Œæˆçš„æ®µè½',
'',
'ä¸€ã€æˆ‘çš„ç”Ÿæ¶¯èˆˆè¶£æ¸¬é©—çµæœçœæ€',
'â€” ä»¥æˆ‘æä¾›çš„å¿ƒæµæ™‚å…‰äº‹ä»¶åŠç¤¾åœ˜ã€å¤šå…ƒæ™ºèƒ½...è³‡è¨Šï¼Œåˆ†åˆ¥ä½è­‰å…©å€‹ä¾†å‹çš„ç”Ÿæ¶¯èˆˆè¶£ã€‚æ¯å€‹ç”Ÿæ¶¯èˆˆè¶£è‡³å°‘è¦èˆ‰2å€‹ä»¥ä¸Šçš„å¿ƒæµæ™‚å…‰äº‹ä»¶åŠç¤¾åœ˜æˆ–å¤šå…ƒæ™ºèƒ½...è³‡è¨Šã€‚æ¯å€‹ç”Ÿæ¶¯èˆˆè¶£çš„çœæ€ï¼Œè«‹è‡³å°‘æä¾›ç´„300å€‹å­—çš„å…§å®¹ã€‚',
'äºŒã€æˆ‘æœªä¾†æƒ³è¦æ¢ç´¢çš„ä¸‰å€‹æ™®é€šå¤§å­¸å­¸ç¾¤',
'â€” è«‹æ ¹æ“šæˆ‘äºŒå€‹ç”Ÿæ¶¯èˆˆè¶£çš„çµ„åˆï¼Œå¾æ™®é€šå¤§å­¸çš„18å­¸ç¾¤ä¸­æŒ‘å‡º3å€‹å­¸ç¾¤ã€‚æ¨è–¦çš„æ¯å€‹å­¸ç¾¤ï¼Œè«‹è©³ç´°åˆ—å‡º3å€‹å…·é«”çš„æ¨è–¦åŸå› ã€‚åŸå› å¯ä»¥åŒ…æ‹¬ç”Ÿæ¶¯èˆˆè¶£å‘åº¦ã€å¤šå…ƒæ™ºèƒ½å‘åº¦æˆ–ç¤¾åœ˜è³‡è¨Š...ã€‚ä¸¦è«‹å°‡é€™äº›åŸå› å½™æ•´ç‚º300å€‹å­—çš„èªªæ˜ã€‚',
'ä»¥ä¸‹ç‚ºæ™®é€šå¤§å­¸çš„18å­¸ç¾¤ï¼š1.è³‡è¨Šå­¸ç¾¤ 2.å·¥ç¨‹å­¸ç¾¤ 3.æ•¸ç†åŒ–å­¸ç¾¤ 4.é†«è—¥è¡›ç”Ÿå­¸ç¾¤ 5.ç”Ÿå‘½ç§‘å­¸å­¸ç¾¤ 6.ç”Ÿç‰©è³‡æºå­¸ç¾¤ 7.åœ°çƒèˆ‡ç’°å¢ƒå­¸ç¾¤ 8.å»ºç¯‰èˆ‡è¨­è¨ˆå­¸ç¾¤ 9.è—è¡“å­¸ç¾¤ 10.ç¤¾æœƒèˆ‡å¿ƒç†å­¸ç¾¤ 11.å¤§çœ¾å‚³æ’­å­¸ç¾¤ 12.å¤–èªå­¸ç¾¤ 13.æ–‡å²å“²å­¸ç¾¤ 14.æ•™è‚²å­¸ç¾¤ 15.æ³•æ”¿å­¸ç¾¤ 16.ç®¡ç†å­¸ç¾¤ 17.è²¡ç¶“å­¸ç¾¤ 18.éŠæ†©èˆ‡é‹å‹•å­¸ç¾¤ï¼‰',
'ä¸‰ã€æˆ‘æœªä¾†æƒ³è¦æ¢ç´¢çš„ä¸‰å€‹ç§‘æŠ€å¤§å­¸ç¾¤é¡',
 'â€” è«‹æ ¹æ“šæˆ‘äºŒå€‹ç”Ÿæ¶¯èˆˆè¶£çš„çµ„åˆï¼Œå…ˆå¾ç§‘æŠ€å¤§å­¸çš„21ç¾¤é¡ä¸­æŒ‘å‡º3å€‹ç¾¤é¡ã€‚æ¨è–¦çš„æ¯å€‹å­¸ç¾¤ï¼Œè«‹è©³ç´°åˆ—å‡º3å€‹å…·é«”çš„æ¨è–¦åŸå› ã€‚åŸå› å¯ä»¥åŒ…æ‹¬ç”Ÿæ¶¯èˆˆè¶£å‘åº¦ã€å¤šå…ƒæ™ºèƒ½å‘åº¦æˆ–ç¤¾åœ˜è³‡è¨Š...ã€‚ä¸¦è«‹å°‡é€™äº›åŸå› å½™æ•´ç‚º300å€‹å­—çš„èªªæ˜ã€‚',
'ä»¥ä¸‹ç‚ºç§‘æŠ€å¤§å­¸21ç¾¤é¡çš„ä¸€è¦½è¡¨ï¼š1.æ©Ÿæ¢°ç¾¤ 2.å‹•åŠ›æ©Ÿæ¢°ç¾¤ 3.é›»æ©Ÿèˆ‡é›»å­ç¾¤ï¼é›»æ©Ÿé¡ 4.é›»æ©Ÿèˆ‡é›»å­ç¾¤ï¼è³‡è¨Šé¡ 5.åŒ–å·¥ç¾¤ 6.åœŸæœ¨èˆ‡å»ºç¯‰ç¾¤ 7.è¨­è¨ˆç¾¤ 8.å·¥ç¨‹èˆ‡ç®¡ç†é¡ 9.å•†æ¥­èˆ‡ç®¡ç†ç¾¤ 10.è¡›ç”Ÿèˆ‡è­·ç†é¡ 11.é£Ÿå“ç¾¤ 12.å®¶æ”¿ç¾¤ï¼å¹¼ä¿é¡ 13.å®¶æ”¿ç¾¤ï¼ç”Ÿæ´»æ‡‰ç”¨é¡ 14.è¾²æ¥­ç¾¤ 15.å¤–èªç¾¤ï¼è‹±èªé¡ 16.å¤–èªç¾¤ï¼æ—¥èªé¡ 17.é¤æ—…ç¾¤ 18.æµ·äº‹ç¾¤ 19.æ°´ç”¢ç¾¤ 20.è—è¡“ç¾¤ï¼å½±è¦–é¡ 21.è³‡ç®¡é¡ï¼‰',
'å››ã€é‡å°é¸å‡ºçš„ä¸‰å€‹æ™®é€šå¤§å­¸å­¸ç¾¤ï¼Œè¨‚å®šæ¯å€‹å¤§å­¸å­¸ç¾¤çš„è‡ªä¸»å­¸ç¿’è¨ˆç•«æˆ–å­¸ç¾¤æ¢ç´¢è¨ˆç•«',
'â€” é‡å°ã€ŒäºŒã€æˆ‘æœªä¾†æƒ³è¦æ¢ç´¢çš„ä¸‰å€‹æ™®é€šå¤§å­¸å­¸ç¾¤ã€çš„æ¯å€‹æ™®é€šå¤§å­¸å­¸ç¾¤ï¼Œå„æå‡ºä¸‰é …å¯ç«‹å³è‘—æ‰‹çš„è‡ªä¸»å­¸ç¿’è¨ˆç•«æˆ–å­¸ç¾¤é«”é©—è¨ˆç•«ã€‚æ¯é …è‡ªä¸»å­¸ç¿’è¨ˆç•«æˆ–å­¸ç¾¤é«”é©—è¨ˆç•«ï¼Œè«‹ä»¥300å€‹å­—ä»¥ä¸Šçš„å…§å®¹ï¼Œç”¨æ¢åˆ—çš„æ–¹å¼ï¼Œä¾åºè©³è¿°è¨ˆç•«åç¨±ã€è¨ˆç•«ç›®çš„ã€åŸ·è¡Œæ­¥é©Ÿã€éœ€è¦çš„è³‡æºèˆ‡æ¬²æ“¬ç²å¾—æ¢ç´¢æˆæœã€‚',
'äº”ã€é‡å°é¸å‡ºçš„ä¸‰å€‹ç§‘æŠ€å¤§å­¸ç¾¤é¡ï¼Œè¨‚å®šæˆ‘çš„è‡ªä¸»å­¸ç¿’è¨ˆç•«æˆ–ç¾¤é¡æ¢ç´¢è¨ˆç•«',
'â€” é‡å°ã€Œä¸‰ã€æˆ‘æœªä¾†æƒ³è¦æ¢ç´¢çš„ä¸‰å€‹ç§‘æŠ€å¤§å­¸ç¾¤é¡ã€çš„æ¯å€‹ç§‘æŠ€å¤§å­¸ç¾¤é¡ï¼Œå„æå‡ºä¸‰é …å¯ç«‹å³è‘—æ‰‹çš„è‡ªä¸»å­¸ç¿’è¨ˆç•«æˆ–å­¸ç¾¤é«”é©—è¨ˆç•«ã€‚æ¯é …è‡ªä¸»å­¸ç¿’è¨ˆç•«æˆ–å­¸ç¾¤é«”é©—è¨ˆç•«ï¼Œè«‹ä»¥300å€‹å­—ä»¥ä¸Šçš„å…§å®¹ï¼Œç”¨æ¢åˆ—çš„æ–¹å¼ï¼Œä¾åºè©³è¿°è¨ˆç•«åç¨±ã€è¨ˆç•«ç›®çš„ã€åŸ·è¡Œæ­¥é©Ÿã€éœ€è¦çš„è³‡æºèˆ‡æ¬²æ“¬ç²å¾—æ¢ç´¢æˆæœã€‚',
'å…­ã€ç¸½çµåæ€',
'â€” ä»¥ç´„300å­—å®Œæˆæ•´é«”è‡ªæˆ‘çœæ€ã€‚çµ±æ•´åœ¨é€™æ¬¡ç”Ÿæ¶¯èˆˆè¶£æ¢ç´¢æ´»å‹•ï¼Œè‡ªå·±ç²å¾—ä»€éº¼æ”¶ç©«èˆ‡çœæ€ï¼Œä¸¦ä¸”æ‘˜è¦é€éé€™æ¬¡æ¢ç´¢ï¼Œè‡ªå·±é‡æ¸…å“ªäº›ç”Ÿæ¶¯ç™¼å±•æ–¹å‘èˆ‡å­¸ç¿’è¡Œå‹•è¨ˆç•«ã€‚',
'',
'åˆ†æçµæœçš„å‘ˆç¾æ–¹æ³•ï¼š',
'1.è«‹å…ˆåœ¨å°è©±æ¡†å‘ˆç¾ä¸Šè¿°è‡ªæˆ‘æ¢ç´¢å­¸ç¿’æ­·ç¨‹æª”æ¡ˆå…¨éƒ¨çš„æ–‡å­—å…§å®¹ ã€‚',
'2.æ¥è‘—å†å°‡ä¸Šè¿°å…¨éƒ¨å…§å®¹å­˜æˆwordæª”æ¡ˆï¼Œæ–¹ä¾¿æˆ‘ä¸‹è¼‰é‹ç”¨ã€‚',
'wordæª”æ¡ˆçš„æ–‡å­—æ ¼å¼ï¼Œè«‹ç”¨ã€ŒMicrosoft JhengHeiã€æˆ–ã€ŒNoto Sans CJKã€ã€‚',
'wordæª”æ¡ˆåç¨±è«‹å–åç‚º Mycareerã€‚'
    ].join('\n');

    return [ L1,'',L2,'',L3,'',L4,'',L5,'',L6,'',L7,'',L8,'',L9,'',L10, tail].join('\n');
  }

  function toast(msg){
    const n=document.createElement('div');
    n.textContent=msg;
    Object.assign(n.style,{position:'fixed',left:'50%',bottom:'calc(env(safe-area-inset-bottom,0) + 24px)',transform:'translateX(-50%)',background:'#1f2328',color:'#fff',padding:'10px 14px',borderRadius:'999px',boxShadow:'0 6px 18px rgba(23,26,31,.2)',zIndex:1000});
    document.body.appendChild(n);
    setTimeout(()=>{n.style.opacity='0';n.style.transition='opacity .3s';},1200);
    setTimeout(()=>n.remove(),1550);
  }
  function fallbackCopy(txt){
    const ta=document.createElement('textarea');
    ta.value=txt; ta.setAttribute('readonly',''); ta.style.position='fixed'; ta.style.top='-9999px';
    document.body.appendChild(ta); ta.focus(); ta.select(); document.execCommand('copy'); ta.remove();
    toast('å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼');
  }
  function reset(){
    Object.assign(S,{
      step:0,
      g1:null, g2_dept:'', g2_isHS:false,
      club:'', club_none:false,
      riasec:[], mi:[],
      flow1:'', flow1_none:false,
      flow2:'', flow2_none:false,
      flow3:'', flow3_none:false,
      flow4:'', flow4_none:false,
      flow5:'', flow5_none:false,
    });
    landing.hidden = false; stage.innerHTML = '';
  }

  document.getElementById('startBtn')?.addEventListener('click', ()=>{ S.step=1; render(); });
  document.getElementById('sampleBtn')?.addEventListener('click', ()=>{ Object.assign(S, sample); render(); });

  render();
})();</script>
</body>
</html>
